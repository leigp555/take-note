import{_ as e,P as t,c as n,d as o,b as a,o as l,a as i,w as r,j as c,g as s,e as u,i as d,x as v,t as f,u as p,m as h,n as m,k as y}from"./default-26feca97.js";import{d as g,j as b,r as w,e as C,q as k,b as x,o as E,c as O,a as S,u as L,g as T,l as N,i as j,p as M,_ as P,C as B,D as V,G as R,W as X,R as A,E as I,U as W,w as Y,X as H,H as _,I as F}from"./index-1df37166.js";import{K as D}from"./KeyCode-a2a1cb88.js";import{s as z,P as U}from"./Portal-3cd3abb7.js";import{_ as $,a as K}from"./classCallCheck-5d344be6.js";var q;function Z(e){if("undefined"==typeof document)return 0;if(e||void 0===q){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),o=n.style;o.position="absolute",o.top="0",o.left="0",o.pointerEvents="none",o.visibility="hidden",o.width="200px",o.height="150px",o.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var a=t.offsetWidth;n.style.overflow="scroll";var l=t.offsetWidth;a===l&&(l=n.clientWidth),document.body.removeChild(n),q=a-l}return q}var G=function(){return{prefixCls:String,width:t.oneOfType([t.string,t.number]),height:t.oneOfType([t.string,t.number]),style:{type:Object,default:void 0},class:String,placement:{type:String},wrapperClassName:String,level:{type:[String,Array]},levelMove:{type:[Number,Function,Array]},duration:String,ease:String,showMask:{type:Boolean,default:void 0},maskClosable:{type:Boolean,default:void 0},maskStyle:{type:Object,default:void 0},afterVisibleChange:Function,keyboard:{type:Boolean,default:void 0},contentWrapperStyle:{type:Object,default:void 0},autofocus:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0}}};var J={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},Q=J[Object.keys(J).filter((function(e){if("undefined"==typeof document)return!1;var t=document.getElementsByTagName("html")[0];return e in(t?t.style:{})}))[0]];function ee(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on".concat(t),n)}function te(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.attachEvent&&e.detachEvent("on".concat(t),n)}var ne=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},oe=!("undefined"!=typeof window&&window.document&&window.document.createElement),ae=function e(t,n,o,a){if(!n||n===document||n instanceof Document)return!1;if(n===t.parentNode)return!0;var l=Math.max(Math.abs(o),Math.abs(a))===Math.abs(a),i=Math.max(Math.abs(o),Math.abs(a))===Math.abs(o),r=n.scrollHeight-n.clientHeight,c=n.scrollWidth-n.clientWidth,s=document.defaultView.getComputedStyle(n),u="auto"===s.overflowY||"scroll"===s.overflowY,d="auto"===s.overflowX||"scroll"===s.overflowX,v=r&&u,f=c&&d;return!!(l&&(!v||v&&(n.scrollTop>=r&&a<0||n.scrollTop<=0&&a>0))||i&&(!f||f&&(n.scrollLeft>=c&&o<0||n.scrollLeft<=0&&o>0)))&&e(t,n.parentNode,o,a)},le=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},ie={},re=g({inheritAttrs:!1,props:e(e({},G()),{getContainer:Function,getOpenCount:Function,scrollLocker:t.any,switchScrollingEffect:Function}),emits:["close","handleClick","change"],setup:function(t,i){var r,c=i.emit,s=i.slots,u=b({startPos:{x:null,y:null}}),d=w(),v=w(),f=w(),p=w(),h=w(),m=[],y="drawer_id_".concat(Number((Date.now()+Math.random()).toString().replace(".",Math.round(9*Math.random()).toString())).toString(16)),g=!(oe||!z)&&{passive:!1};C((function(){k((function(){var e,n=t.open,o=t.getContainer,a=t.showMask,l=t.autofocus,i=null==o?void 0:o();_(t),n&&(i&&i.parentNode===document.body&&(ie[y]=n),R(),k((function(){l&&L()})),a&&(null===(e=t.scrollLocker)||void 0===e||e.lock()))}))})),x((function(){return t.level}),(function(){_(t)}),{flush:"post"}),x((function(){return t.open}),(function(){var e=t.open,n=t.getContainer,o=t.scrollLocker,a=t.showMask,l=t.autofocus,i=null==n?void 0:n();i&&i.parentNode===document.body&&(ie[y]=!!e),R(),e?(l&&L(),a&&(null==o||o.lock())):null==o||o.unLock()}),{flush:"post"}),E((function(){var e,n=t.open;delete ie[y],n&&(X(!1),document.body.style.touchAction=""),null===(e=t.scrollLocker)||void 0===e||e.unLock()})),x((function(){return t.placement}),(function(e){e&&(h.value=null)}));var L=function(){var e,t;null===(t=null===(e=v.value)||void 0===e?void 0:e.focus)||void 0===t||t.call(e)},T=function(e){e.touches.length>1||(u.startPos={x:e.touches[0].clientX,y:e.touches[0].clientY})},N=function(e){if(!(e.changedTouches.length>1)){var t=e.currentTarget,n=e.changedTouches[0].clientX-u.startPos.x,o=e.changedTouches[0].clientY-u.startPos.y;(t===f.value||t===p.value||t===h.value&&ae(t,e.target,n,o))&&e.cancelable&&e.preventDefault()}},j=function e(t){var n=t.target;te(n,Q,e),n.style.transition=""},M=function(e){c("close",e)},P=function(e){e.keyCode===D.ESC&&(e.stopPropagation(),M(e))},B=function(e){var n=t.open,o=t.afterVisibleChange;e.target===d.value&&e.propertyName.match(/transform$/)&&(v.value.style.transition="",!n&&H()&&(document.body.style.overflowX="",f.value&&(f.value.style.left="",f.value.style.width="")),o&&o(!!n))},V=O((function(){var e=t.placement,n="left"===e||"right"===e;return{isHorizontal:n,placementName:"translate".concat(n?"X":"Y")}})),R=function(){var e=t.open,n=t.width,o=t.height,a=V.value,l=a.isHorizontal,i=a.placementName,r=h.value?h.value.getBoundingClientRect()[l?"width":"height"]:0;A(e,i,(l?n:o)||r)},X=function(e,n,o,a){var l=t.placement,i=t.levelMove,r=t.duration,c=t.ease,s=t.showMask;m.forEach((function(t){t.style.transition="transform ".concat(r," ").concat(c),ee(t,Q,j);var u,d,v,f=e?o:0;if(i){var p=(d={target:t,open:e},v="function"==typeof(u=i)?u(d):u,Array.isArray(v)?2===v.length?v:[v[0],v[1]]:[v]);f=e?p[0]:p[1]||0}var h="number"==typeof f?"".concat(f,"px"):f,m="left"===l||"top"===l?h:"-".concat(h);m=s&&"right"===l&&a?"calc(".concat(m," + ").concat(a,"px)"):m,t.style.transform=f?"".concat(n,"(").concat(m,")"):""}))},A=function(e,t,n){if(!oe){var o=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth?Z(!0):0;X(e,t,n,o),I(o)}c("change",e)},I=function(e){var n=t.getContainer,o=t.showMask,a=t.open,l=null==n?void 0:n();if(l&&l.parentNode===document.body&&o){var i=["touchstart"],r=[document.body,f.value,p.value,h.value];a&&"hidden"!==document.body.style.overflow?(e&&W(e),document.body.style.touchAction="none",r.forEach((function(e,t){e&&ee(e,i[t]||"touchmove",t?N:T,g)}))):H()&&(document.body.style.touchAction="",e&&Y(e),r.forEach((function(e,t){e&&te(e,i[t]||"touchmove",t?N:T,g)})))}},W=function(e){var n=t.placement,o=t.duration,a=t.ease,l="width ".concat(o," ").concat(a),i="transform ".concat(o," ").concat(a);switch(v.value.style.transition="none",n){case"right":v.value.style.transform="translateX(-".concat(e,"px)");break;case"top":case"bottom":v.value.style.width="calc(100% - ".concat(e,"px)"),v.value.style.transform="translateZ(0)"}clearTimeout(r),r=setTimeout((function(){v.value&&(v.value.style.transition="".concat(i,",").concat(l),v.value.style.width="",v.value.style.transform="")}))},Y=function(e){var n,o=t.placement,a=t.duration,l=t.ease;v.value.style.transition="none";var i="width ".concat(a," ").concat(l),c="transform ".concat(a," ").concat(l);switch(o){case"left":v.value.style.width="100%",i="width 0s ".concat(l," ").concat(a);break;case"right":v.value.style.transform="translateX(".concat(e,"px)"),v.value.style.width="100%",i="width 0s ".concat(l," ").concat(a),f.value&&(f.value.style.left="-".concat(e,"px"),f.value.style.width="calc(100% + ".concat(e,"px)"));break;case"top":case"bottom":v.value.style.width="calc(100% + ".concat(e,"px)"),v.value.style.height="100%",v.value.style.transform="translateZ(0)",n="height 0s ".concat(l," ").concat(a)}clearTimeout(r),r=setTimeout((function(){v.value&&(v.value.style.transition="".concat(c,",").concat(n?"".concat(n,","):"").concat(i),v.value.style.transform="",v.value.style.width="",v.value.style.height="")}))},H=function(){return!Object.keys(ie).some((function(e){return ie[e]}))},_=function(e){var t=e.level,n=e.getContainer;if(!oe){var o,a=null==n?void 0:n(),l=a?a.parentNode:null;if(m=[],"all"===t)(l?Array.prototype.slice.call(l.children):[]).forEach((function(e){"SCRIPT"!==e.nodeName&&"STYLE"!==e.nodeName&&"LINK"!==e.nodeName&&e!==a&&m.push(e)}));else t&&(o=t,Array.isArray(o)?o:[o]).forEach((function(e){document.querySelectorAll(e).forEach((function(e){m.push(e)}))}))}},F=function(e){c("handleClick",e)},U=w(!1);return x(v,(function(){k((function(){U.value=!0}))})),function(){var i,r,c,u=t.width,m=t.height,y=t.open,g=t.prefixCls,b=t.placement;t.level,t.levelMove,t.ease,t.duration,t.getContainer,t.onChange,t.afterVisibleChange;var w=t.showMask,C=t.maskClosable,k=t.maskStyle,x=t.keyboard;t.getOpenCount,t.scrollLocker;var E=t.contentWrapperStyle,O=t.style,L=t.class,T=le(t,["width","height","open","prefixCls","placement","level","levelMove","ease","duration","getContainer","onChange","afterVisibleChange","showMask","maskClosable","maskStyle","keyboard","getOpenCount","scrollLocker","contentWrapperStyle","style","class"]),N=y&&U.value,j=n(g,(o(i={},"".concat(g,"-").concat(b),!0),o(i,"".concat(g,"-open"),N),o(i,L,!!L),o(i,"no-mask",!w),i)),R=V.value.placementName,X="left"===b||"top"===b?"-100%":"100%",A=N?"":"".concat(R,"(").concat(X,")");return S("div",a(a({},l(T,["switchScrollingEffect","autofocus"])),{},{tabindex:-1,class:j,style:O,ref:v,onKeydown:N&&x?P:void 0,onTransitionend:B}),[w&&S("div",{class:"".concat(g,"-mask"),onClick:C?M:void 0,style:k,ref:f},null),S("div",{class:"".concat(g,"-content-wrapper"),style:e({transform:A,msTransform:A,width:ne(u)?"".concat(u,"px"):u,height:ne(m)?"".concat(m,"px"):m},E),ref:d},[S("div",{class:"".concat(g,"-content"),ref:h},[null===(r=s.default)||void 0===r?void 0:r.call(s)]),s.handler?S("div",{onClick:F,ref:p},[null===(c=s.handler)||void 0===c?void 0:c.call(s)]):null])])}}});function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.element,o=void 0===n?document.body:n,a={},l=Object.keys(e);return l.forEach((function(e){a[e]=o.style[e]})),l.forEach((function(t){o.style[t]=e[t]})),a}var se={},ue=function(e){if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth||e){var t="ant-scrolling-effect",n=new RegExp("".concat(t),"g"),o=document.body.className;if(e){if(!n.test(o))return;return ce(se),se={},void(document.body.className=o.replace(n,"").trim())}var a=Z();if(a&&(se=ce({position:"relative",width:"calc(100% - ".concat(a,"px)")}),!n.test(o))){var l="".concat(o," ").concat(t);document.body.className=l.trim()}}},de=[],ve=new RegExp("".concat("ant-scrolling-effect"),"g"),fe=0,pe=new Map,he=$((function e(t){var n=this;K(this,e),this.getContainer=function(){var e;return null===(e=n.options)||void 0===e?void 0:e.container},this.reLock=function(e){var t=de.find((function(e){return e.target===n.lockTarget}));t&&n.unLock(),n.options=e,t&&(t.options=e,n.lock())},this.lock=function(){var e;if(!de.some((function(e){return e.target===n.lockTarget})))if(de.some((function(e){var t,o=e.options;return(null==o?void 0:o.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})))de=[].concat(i(de),[{target:n.lockTarget,options:n.options}]);else{var t=0,o=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body;(o===document.body&&window.innerWidth-document.documentElement.clientWidth>0||o.scrollHeight>o.clientHeight)&&(t=Z());var a=o.className;if(0===de.filter((function(e){var t,o=e.options;return(null==o?void 0:o.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})).length&&pe.set(o,ce({width:0!==t?"calc(100% - ".concat(t,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:o})),!ve.test(a)){var l="".concat(a," ").concat("ant-scrolling-effect");o.className=l.trim()}de=[].concat(i(de),[{target:n.lockTarget,options:n.options}])}},this.unLock=function(){var e,t=de.find((function(e){return e.target===n.lockTarget}));if(de=de.filter((function(e){return e.target!==n.lockTarget})),t&&!de.some((function(e){var n,o=e.options;return(null==o?void 0:o.container)===(null===(n=t.options)||void 0===n?void 0:n.container)}))){var o=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body,a=o.className;ve.test(a)&&(ce(pe.get(o),{element:o}),pe.delete(o),o.className=o.className.replace(ve,"").trim())}},this.lockTarget=fe++,this.options=t})),me=0,ye=c(),ge={},be=function(e){if(!ye)return null;if(e){if("string"==typeof e)return document.querySelectorAll(e)[0];if("function"==typeof e)return e();if("object"===s(e)&&e instanceof window.HTMLElement)return e}return document.body},we=g({name:"PortalWrapper",inheritAttrs:!1,props:{wrapperClassName:String,forceRender:{type:Boolean,default:void 0},getContainer:t.any,visible:{type:Boolean,default:void 0}},setup:function(e,t){var n=t.slots,o=w(),a=w(),l=w(),i=new he({container:be(e.getContainer)}),c=function(){var e,t;null===(t=null===(e=o.value)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(o.value)},s=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t||o.value&&!o.value.parentNode){var n=be(e.getContainer);return!!n&&(n.appendChild(o.value),!0)}return!0},d=function(){return ye?(o.value||(o.value=document.createElement("div"),s(!0)),v(),o.value):null},v=function(){var t=e.wrapperClassName;o.value&&t&&t!==o.value.className&&(o.value.className=t)};L((function(){v(),s()}));var f=function(){1!==me||Object.keys(ge).length?me||(ce(ge),ge={},ue(!0)):(ue(),ge=ce({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))},p=N();return C((function(){var t=!1;x([function(){return e.visible},function(){return e.getContainer}],(function(n,o){var a=u(n,2),l=a[0],r=a[1],s=u(o,2),d=s[0],v=s[1];(ye&&be(e.getContainer)===document.body&&(l&&!d?me+=1:t&&(me-=1)),t)&&(("function"==typeof r&&"function"==typeof v?r.toString()!==v.toString():r!==v)&&c(),l&&l!==d&&ye&&be(r)!==i.getContainer()&&i.reLock({container:be(r)}));t=!0}),{immediate:!0,flush:"post"}),k((function(){s()||(l.value=r((function(){p.update()})))}))})),T((function(){var t=e.visible,n=e.getContainer;ye&&be(n)===document.body&&(me=t&&me?me-1:me),c(),r.cancel(l.value)})),function(){var t=e.forceRender,o=e.visible,l=null,r={getOpenCount:function(){return me},getContainer:d,switchScrollingEffect:f,scrollLocker:i};return(t||o||a.value)&&(l=S(U,{getContainer:d,ref:a},{default:function(){var e;return null===(e=n.default)||void 0===e?void 0:e.call(n,r)}})),l}}}),Ce=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},ke=g({inheritAttrs:!1,props:d(e(e({},G()),{forceRender:{type:Boolean,default:void 0},getContainer:t.oneOfType([t.string,t.func,t.object,t.looseBool])}),{prefixCls:"drawer",placement:"left",getContainer:"body",level:"all",duration:".3s",ease:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",afterVisibleChange:function(){},showMask:!0,maskClosable:!0,maskStyle:{},wrapperClassName:"",keyboard:!0,forceRender:!1,autofocus:!0}),emits:["handleClick","close"],slots:["handler"],setup:function(e,t){var n=t.emit,o=t.slots,l=w(null),i=function(e){n("handleClick",e)},r=function(e){n("close",e)};return function(){e.afterVisibleChange;var t=e.getContainer,n=e.wrapperClassName,c=e.forceRender,s=Ce(e,["afterVisibleChange","getContainer","wrapperClassName","forceRender"]),u=null;if(!t)return S("div",{class:n,ref:l},[S(re,a(a({},s),{},{open:e.open,getContainer:function(){return l.value},onClose:r,onHandleClick:i}),o)]);var d=!!o.handler||c;return(d||e.open||l.value)&&(u=S(we,{visible:e.open,forceRender:d,getContainer:t,wrapperClassName:n},{default:function(t){var n=t.visible,c=t.afterClose,u=Ce(t,["visible","afterClose"]);return S(re,a(a(a({ref:l},s),u),{},{open:void 0!==n?n:e.open,afterVisibleChange:void 0!==c?c:e.afterVisibleChange,onClose:r,onHandleClick:i}),o)}})),u}}}),xe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},Ee=f("top","right","bottom","left");f("default","large");var Oe={distance:180},Se=v(g({name:"ADrawer",inheritAttrs:!1,props:d({autofocus:{type:Boolean,default:void 0},closable:{type:Boolean,default:void 0},closeIcon:t.any,destroyOnClose:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},getContainer:t.any,maskClosable:{type:Boolean,default:void 0},mask:{type:Boolean,default:void 0},maskStyle:{type:Object,default:void 0},wrapStyle:{type:Object,default:void 0},style:{type:Object,default:void 0},class:t.any,wrapClassName:String,size:{type:String},drawerStyle:{type:Object,default:void 0},headerStyle:{type:Object,default:void 0},bodyStyle:{type:Object,default:void 0},contentWrapperStyle:{type:Object,default:void 0},title:t.any,visible:{type:Boolean,default:void 0},width:t.oneOfType([t.string,t.number]),height:t.oneOfType([t.string,t.number]),zIndex:Number,prefixCls:String,push:t.oneOfType([t.looseBool,{type:Object}]),placement:t.oneOf(Ee),keyboard:{type:Boolean,default:void 0},extra:t.any,footer:t.any,footerStyle:{type:Object,default:void 0},level:t.any,levelMove:{type:[Number,Array,Function]},handle:t.any,afterVisibleChange:Function,onAfterVisibleChange:Function,"onUpdate:visible":Function,onClose:Function},{closable:!0,placement:"right",maskClosable:!0,mask:!0,level:null,keyboard:!0,push:Oe}),slots:["closeIcon","title","extra","footer","handle"],setup:function(t,a){var i=a.emit,r=a.slots,c=a.attrs,s=w(!1),u=w(!1),d=w(null),v=j("parentDrawerOpts",null),f=p("drawer",t).prefixCls;h(!t.afterVisibleChange,"Drawer","`afterVisibleChange` prop is deprecated, please use `@afterVisibleChange` event instead"),h(void 0===t.wrapStyle,"Drawer","`wrapStyle` prop is deprecated, please use `style` instead"),h(void 0===t.wrapClassName,"Drawer","`wrapClassName` prop is deprecated, please use `class` instead");M("parentDrawerOpts",{setPush:function(){s.value=!0},setPull:function(){s.value=!1,k((function(){g()}))}}),C((function(){t.visible&&v&&v.setPush()})),E((function(){v&&v.setPull()})),x((function(){return t.visible}),(function(e){v&&(e?v.setPush():v.setPull())}),{flush:"post"});var g=function(){var e,t;null===(t=null===(e=d.value)||void 0===e?void 0:e.domFocus)||void 0===t||t.call(e)},b=function(e){i("update:visible",!1),i("close",e)},L=function(e){var n;null===(n=t.afterVisibleChange)||void 0===n||n.call(t,e),i("afterVisibleChange",e)},T=O((function(){return t.destroyOnClose&&!t.visible})),N=function(){T.value&&(t.visible||(u.value=!0))},P=O((function(){var e,n=t.push,o=t.placement;return e="boolean"==typeof n?n?Oe.distance:0:n.distance,e=parseFloat(String(e||0)),"left"===o||"right"===o?"translateX(".concat("left"===o?e:-e,"px)"):"top"===o||"bottom"===o?"translateY(".concat("top"===o?e:-e,"px)"):null})),B=O((function(){var e=t.visible,n=t.mask,o=t.placement,a=t.size,l=void 0===a?"default":a,i=t.width,r=t.height;if(!e&&!n)return{};var c={};if("left"===o||"right"===o){var s="large"===l?736:378;c.width=void 0===i?s:i,c.width="string"==typeof c.width?c.width:"".concat(c.width,"px")}else{var u="large"===l?736:378;c.height=void 0===r?u:r,c.height="string"==typeof c.height?c.height:"".concat(c.height,"px")}return c})),V=O((function(){var n=t.zIndex,o=t.wrapStyle,a=t.mask,l=t.style,i=a?{}:B.value;return e(e(e({zIndex:n,transform:s.value?P.value:void 0},i),o),l)})),R=function(e){var a=t.closable,l=t.headerStyle,i=m(r,t,"extra"),c=m(r,t,"title");return c||a?S("div",{class:n("".concat(e,"-header"),o({},"".concat(e,"-header-close-only"),a&&!c&&!i)),style:l},[S("div",{class:"".concat(e,"-header-title")},[X(e),c&&S("div",{class:"".concat(e,"-title")},[c])]),i&&S("div",{class:"".concat(e,"-extra")},[i])]):null},X=function(e){var n,o=t.closable,a=r.closeIcon?null===(n=r.closeIcon)||void 0===n?void 0:n.call(r):t.closeIcon;return o&&S("button",{key:"closer",onClick:b,"aria-label":"Close",class:"".concat(e,"-close")},[void 0===a?S(y,null,null):a])},A=function(e){var n=m(r,t,"footer");if(!n)return null;var o="".concat(e,"-footer");return S("div",{class:o,style:t.footerStyle},[n])};return function(){var a;t.width,t.height;var i=t.visible,s=t.placement,v=t.mask,p=t.wrapClassName,h=t.class,m=xe(t,["width","height","visible","placement","mask","wrapClassName","class"]),y=v?B.value:{},g=v?"":"no-mask",w=e(e(e(e({},c),l(m,["size","closeIcon","closable","destroyOnClose","drawerStyle","headerStyle","bodyStyle","title","push","wrapStyle","onAfterVisibleChange","onClose","onUpdate:visible"])),y),{onClose:b,afterVisibleChange:L,handler:!1,prefixCls:f.value,open:i,showMask:v,placement:s,class:n((a={},o(a,h,h),o(a,p,!!p),o(a,g,!!g),a)),style:V.value,ref:d});return S(ke,w,{handler:t.handle?function(){return t.handle}:r.handle,default:function(){return function(n){var o;if(u.value&&!t.visible)return null;u.value=!1;var a=t.bodyStyle,l=t.drawerStyle,i={};return T.value&&(i.opacity=0,i.transition="opacity .3s"),S("div",{class:"".concat(n,"-wrapper-body"),style:e(e({},i),l),onTransitionend:N},[R(n),S("div",{key:"body",class:"".concat(n,"-body"),style:a},[null===(o=r.default)||void 0===o?void 0:o.call(r)]),A(n)])}(f.value)}})}}}));const Le=(e,t,n,o=!0)=>{const a="ontouchstart"in document.documentElement,l=e.getContext("2d");function i(e,t,n,o){l&&(l.beginPath(),l.moveTo(e,t),l.lineTo(n,o),l.stroke())}l&&(l.fillStyle=t,l.strokeStyle=t,l.lineWidth=n,l.lineCap="round");let r,c=!1;function s(e){c=!0;const t=e.touches[0].pageX,n=e.touches[0].pageY;r=[t,n]}function u(e){c=!0;const t=e.touches[0].pageX,n=e.touches[0].pageY;i(r[0],r[1],t,n),r=[t,n]}function d(){c=!1}function v(e){c=!0,r=[e.pageX,e.pageY]}function f(e){c&&(i(r[0],r[1],e.pageX,e.pageY),r=[e.pageX,e.pageY])}document.getElementById("clear").addEventListener("click",(()=>{a?(e.removeEventListener("touchstart",s,!1),e.removeEventListener("touchmove",u,!1),e.removeEventListener("touchend",d,!1)):(e.removeEventListener("mousedown",v),e.removeEventListener("mousemove",f),e.removeEventListener("mouseup",d))})),a&&o?(e.addEventListener("touchstart",s,!1),e.addEventListener("touchmove",u,!1),e.addEventListener("touchend",d,!1)):!a&&o&&(e.addEventListener("mousedown",v),e.addEventListener("mousemove",f),e.addEventListener("mouseup",d))},Te=(e,t,n)=>new Promise(((o,a)=>{const l=e.toDataURL(n||"image",t||1),i=new Image;i.src=l,i.onload=()=>{o(i)},i.onerror=e=>{a(e)}}));const Ne=e=>(_("data-v-6b8665cb"),e=e(),F(),e),je={class:"wrap"},Me={id:"canvasWrap"},Pe={class:"selector"},Be=["onClick"],Ve={class:"setting"},Re={class:"section"},Xe=Ne((()=>R("svg",{class:"icon","aria-hidden":"true"},[R("use",{"xlink:href":"#icon-beijingyanse"})],-1))),Ae={class:"section"},Ie=[Ne((()=>R("svg",{class:"icon","aria-hidden":"true"},[R("use",{"xlink:href":"#icon-jia"})],-1)))],We=[Ne((()=>R("svg",{class:"icon","aria-hidden":"true"},[R("use",{"xlink:href":"#icon-jian"})],-1)))],Ye={class:"section"},He=Ne((()=>R("svg",{class:"icon","aria-hidden":"true"},[R("use",{"xlink:href":"#icon-beijingyanse"})],-1))),_e={class:"section"},Fe={class:"section"},De=[Ne((()=>R("svg",{class:"icon","aria-hidden":"true"},[R("use",{"xlink:href":"#icon-jia"})],-1)))],ze=[Ne((()=>R("svg",{class:"icon","aria-hidden":"true"},[R("use",{"xlink:href":"#icon-jian"})],-1)))];var Ue=P(g({name:"Canvas",setup(e){const t=w(),n=w("#000000"),o=w(4),a=w("#ffffff"),l=w(parseInt(document.body.getBoundingClientRect().height.toString(),10)),i=()=>{Le(t.value,n.value,o.value)};C((()=>{t.value.width=document.body.getBoundingClientRect().width,t.value.height=document.body.getBoundingClientRect().height,Le(t.value,n.value,o.value),document.body.addEventListener("touchmove",(e=>{e.preventDefault()}),{passive:!1})}));const r=w(!1),c=()=>{r.value=!0},s=()=>{o.value+=1,i()},u=()=>{o.value<=0?o.value=4:o.value-=1,i()},d=async()=>{const e=await(async()=>{let e;try{e=await Te(t.value,1,"image")}catch(n){}return e})();t.value.width=document.body.getBoundingClientRect().width,t.value.height=l.value;t.value.getContext("2d").drawImage(e,0,0),i(),r.value=!1},v=()=>{const e=t.value.getContext("2d");e&&(e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.value.width,t.value.height),e.restore())},f=w();function p(e){const n=t.value.getContext("2d"),o=e.touches[0].pageX,a=e.touches[0].pageY;f.value.style.top=`${e.touches[0].pageY}px`,f.value.style.left=`${e.touches[0].pageX}px`,n.clearRect(o,a,10,10)}function h(e){f.value.style.display="block",f.value.style.top=`${e.touches[0].pageY}px`,f.value.style.left=`${e.touches[0].pageX}px`;const n=e.touches[0].pageX,o=e.touches[0].pageY;t.value.getContext("2d").clearRect(n,o,E.value,E.value)}function m(){f.value.style.display="none",t.value.removeEventListener("touchstart",p),t.value.removeEventListener("touchmove",h),t.value.removeEventListener("touchend",m)}const y=w(!1);function g(e){y.value=!0;const n=t.value.getContext("2d"),o=e.pageX,a=e.pageY;n.clearRect(o,a,10,10)}function b(e){if(y.value){f.value.style.display="block";const n=e.pageX,o=e.pageY;t.value.getContext("2d").clearRect(n,o,E.value,E.value)}}function k(){y.value=!1,f.value.style.display="none",t.value.removeEventListener("mousedown",g),t.value.removeEventListener("mousemove",b),t.value.removeEventListener("mouseup",k)}const x=()=>{Le(t.value,n.value,o.value)},E=w(20),O=()=>{E.value+=1,Le(t.value,a.value,E.value)},L=()=>{E.value-=1,Le(t.value,a.value,E.value)},T=()=>{Le(t.value,a.value,E.value)},N=()=>{Le(t.value,"transparent",1,!1);"ontouchstart"in document.documentElement?(t.value.addEventListener("touchstart",p),t.value.addEventListener("touchmove",h),t.value.addEventListener("touchend",m)):(t.value.addEventListener("mousedown",g),t.value.addEventListener("mousemove",b),t.value.addEventListener("mouseup",k))};return(e,p)=>{const h=Se;return B(),V("div",je,[R("div",Me,[R("canvas",{ref_key:"canvasEl",ref:t,style:X({background:a.value}),class:"canvasEl"},null,4),R("div",Pe,[R("button",{onClick:c},"画板设置"),R("button",{onClick:v},"清空画布内容"),R("button",{id:"clear",onClick:A(N,["prevent"])},"橡皮擦",8,Be),R("button",{onClick:x},"继续绘画")])]),S(h,{visible:r.value,"onUpdate:visible":p[5]||(p[5]=e=>r.value=e),class:"custom-class",width:"30%",closable:!1,title:"画板设置",placement:"right"},{default:I((()=>[R("div",Ve,[R("div",Re,[R("p",null,"线条颜色:"+W(n.value),1),R("label",null,[Xe,Y(R("input",{type:"color","onUpdate:modelValue":p[0]||(p[0]=e=>n.value=e),onChange:i},null,544),[[H,n.value]])])]),R("div",Ae,[R("p",null,"线条宽度:"+W(o.value),1),R("label",null,[R("button",{onClick:s},Ie),Y(R("input",{type:"text","onUpdate:modelValue":p[1]||(p[1]=e=>o.value=e),onChange:i,style:{"max-width":"50px"}},null,544),[[H,o.value,void 0,{number:!0}]]),R("button",{onClick:u},We)])]),R("div",Ye,[R("p",null,"画布颜色:"+W(a.value),1),R("label",null,[He,Y(R("input",{type:"color","onUpdate:modelValue":p[2]||(p[2]=e=>a.value=e),onChange:i},null,544),[[H,a.value]])])]),R("div",_e,[R("p",null,"画布高度:"+W(l.value),1),R("label",null,[Y(R("input",{type:"text","onUpdate:modelValue":p[3]||(p[3]=e=>l.value=e),style:{"max-width":"50px"},onChange:d},null,544),[[H,l.value,void 0,{number:!0}]]),R("button",{onClick:d,style:{"box-shadow":"0 0 1px 0 rgba(0, 0, 0, 0.5)"}}," 提交 ")])]),R("div",Fe,[R("p",null,"橡皮擦宽度:"+W(E.value),1),R("label",null,[R("button",{onClick:O},De),Y(R("input",{type:"text","onUpdate:modelValue":p[4]||(p[4]=e=>E.value=e),onChange:T,style:{"max-width":"50px"}},null,544),[[H,E.value,void 0,{number:!0}]]),R("button",{onClick:L},ze)])])])])),_:1},8,["visible"]),R("div",{ref_key:"clearTag",ref:f,id:"clearTag",draggable:"false"},null,512)])}}}),[["__scopeId","data-v-6b8665cb"]]);export{Ue as default};
