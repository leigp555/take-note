import"./default-6e83181f.js";import{F as e,_ as a}from"./index-ceaa7bfa.js";import"./index-22a2ea1f.js";/* empty css              */import{I as s,_ as t}from"./index-4fe58651.js";import{B as r}from"./index-a18be3c6.js";import{_ as i,d as l,u as o,y as m,i as u,j as n,k as d,c,l as p,p as f,q as g,a0 as b,s as _,a1 as y}from"./index-51d32f2b.js";import{T as v}from"./axios-0933a447.js";import{u as j}from"./user-ae7eb218.js";import"./isEqual-f55676e6.js";import"./isObjectLike-9a344489.js";import"./_flatRest-bfb5ad71.js";import"./toNumber-dcbbfd0b.js";import"./toString-c55ec25b.js";import"./toInteger-baa14e06.js";import"./collapseMotion-a3dbbbad.js";import"./FormItemContext-03e74a16.js";import"./raf-cb3d651e.js";import"./styleChecker-fcf63502.js";import"./vnode-13f0d3da.js";import"./omit-22df1d32.js";const h={class:"register-section-wrap"},k=(e=>(f("data-v-a96b96d6"),e=e(),g(),e))((()=>d("section",{class:"section-title"},[d("h3",{style:{"text-align":"center"}},"用户注册")],-1))),C={class:"section-from"},w={class:"identifying-code"},x=_("获取验证码"),z={class:"button-action"},A=_(" 注册 "),Z=_(" 返回登录 ");var q=i(l({__name:"Register",setup(i){const l=o(),f=j(),g=m({username:"lgp",email:"122974945@qq.com",securityCode:"123456",password:"123456abc",checkPass:"123456abc"}),q=m({timing:!1,time:60}),I=[{required:!0,message:"请填写用户名"},{pattern:/^[0-9A-Za-z_@/.]{3,20}$/,message:"请输入3-20位(数字,字母或下划线@.)",trigger:"blur"}],$=[{required:!0,message:"请填写邮箱"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请填写正确的邮箱",trigger:"blur"}],U=[{required:!0,message:"请填写密码"},{pattern:/^[a-zA-Z0-9_]{6,16}$/,message:"请输入6到16位(字母，数字，下划线)",trigger:"blur"}],P=[{required:!0,message:"验证密码"},{pattern:/^[a-zA-Z0-9_]{6,16}$/,message:"两次输入不一致",trigger:"blur"}],F=()=>{const e=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(g.email&&e.test(g.email)){v("success","验证码已发送",1500),q.timing=!0;const e=setInterval((()=>{q.time>0?q.time-=1:(q.timing=!1,q.time=60,window.clearInterval(e))}),1e3);f.getSecurityCode({email:g.email,type:"register"}).catch((()=>{v("error","发送失败请重试")}))}else g.email&&!e.test(g.email)?v("error","邮箱格式有误"):v("error","请先填写邮箱")},M=()=>{f.register({username:g.username,email:g.email,password:g.password,securityCode:g.securityCode}).then((()=>{v("success","注册成功!2秒后跳转至登录页",2e3),setTimeout((()=>{l.push("/login")}),2e3)})).catch((e=>{v("error",e.errors.errMsg,2e3)}))},R=()=>{l.push("/login")};return(i,l)=>{const o=s,m=a,f=r,v=t,j=e;return u(),n("div",h,[k,d("section",C,[c(j,{model:g,name:"normal_register",class:"register-form",onFinish:M},{default:p((()=>[c(m,{name:"username",rules:I},{default:p((()=>[c(o,{value:g.username,"onUpdate:value":l[0]||(l[0]=e=>g.username=e),placeholder:"用户名"},null,8,["value"])])),_:1}),c(m,{name:"email",rules:$},{default:p((()=>[c(o,{value:g.email,"onUpdate:value":l[1]||(l[1]=e=>g.email=e),placeholder:"邮箱"},null,8,["value"])])),_:1}),c(m,{name:"securityCode"},{default:p((()=>[d("div",w,[c(o,{value:g.securityCode,"onUpdate:value":l[2]||(l[2]=e=>g.securityCode=e),placeholder:"验证码"},null,8,["value"]),q.timing?(u(),b(f,{key:1,type:"primary",disabled:"",class:"identifying-code-button",onClick:F},{default:p((()=>[_(y(`${q.time} 秒后可获取`),1)])),_:1})):(u(),b(f,{key:0,type:"primary",class:"identifying-code-button",onClick:F},{default:p((()=>[x])),_:1}))])])),_:1}),c(m,{name:"password",rules:U},{default:p((()=>[c(v,{value:g.password,"onUpdate:value":l[3]||(l[3]=e=>g.password=e),placeholder:"密码"},null,8,["value"])])),_:1}),c(m,{name:"checkPass",rules:P},{default:p((()=>[c(v,{value:g.checkPass,"onUpdate:value":l[4]||(l[4]=e=>g.checkPass=e),placeholder:"确认密码"},null,8,["value"])])),_:1}),c(m,null,{default:p((()=>[d("div",z,[c(f,{type:"primary","html-type":"submit",class:"register-form-button"},{default:p((()=>[A])),_:1}),c(f,{type:"primary",class:"register-form-button",style:{"background-color":"white"},onClick:R},{default:p((()=>[Z])),_:1})])])),_:1})])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-a96b96d6"]]);export{q as default};
