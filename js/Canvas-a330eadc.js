import{_ as e,P as t,c as n,d as o,b as a,o as l,a as i,e as r,w as c,j as s,g as u,i as d,x as v,t as f,u as p,m as h,n as m,k as y}from"./index-36179400.js";import{d as g,j as b,r as w,e as C,q as k,b as x,o as E,c as O,a as S,u as L,g as T,l as N,i as j,p as M,_ as P,C as B,D as V,G as R,W as X,E as A,R as I,U as W,w as _,X as Y,f as H,H as F,I as D}from"./index-254e3073.js";import{_ as z,a as U}from"./index-797db163.js";import{B as $}from"./button-2c69a739.js";import{K}from"./KeyCode-a2a1cb88.js";import{s as q,P as Z}from"./Portal-d012b8c9.js";var G;function J(e){if("undefined"==typeof document)return 0;if(e||void 0===G){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),o=n.style;o.position="absolute",o.top="0",o.left="0",o.pointerEvents="none",o.visibility="hidden",o.width="200px",o.height="150px",o.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var a=t.offsetWidth;n.style.overflow="scroll";var l=t.offsetWidth;a===l&&(l=n.clientWidth),document.body.removeChild(n),G=a-l}return G}var Q=function(){return{prefixCls:String,width:t.oneOfType([t.string,t.number]),height:t.oneOfType([t.string,t.number]),style:{type:Object,default:void 0},class:String,placement:{type:String},wrapperClassName:String,level:{type:[String,Array]},levelMove:{type:[Number,Function,Array]},duration:String,ease:String,showMask:{type:Boolean,default:void 0},maskClosable:{type:Boolean,default:void 0},maskStyle:{type:Object,default:void 0},afterVisibleChange:Function,keyboard:{type:Boolean,default:void 0},contentWrapperStyle:{type:Object,default:void 0},autofocus:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0}}};var ee={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},te=ee[Object.keys(ee).filter((function(e){if("undefined"==typeof document)return!1;var t=document.getElementsByTagName("html")[0];return e in(t?t.style:{})}))[0]];function ne(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on".concat(t),n)}function oe(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.attachEvent&&e.detachEvent("on".concat(t),n)}var ae=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},le=!("undefined"!=typeof window&&window.document&&window.document.createElement),ie=function e(t,n,o,a){if(!n||n===document||n instanceof Document)return!1;if(n===t.parentNode)return!0;var l=Math.max(Math.abs(o),Math.abs(a))===Math.abs(a),i=Math.max(Math.abs(o),Math.abs(a))===Math.abs(o),r=n.scrollHeight-n.clientHeight,c=n.scrollWidth-n.clientWidth,s=document.defaultView.getComputedStyle(n),u="auto"===s.overflowY||"scroll"===s.overflowY,d="auto"===s.overflowX||"scroll"===s.overflowX,v=r&&u,f=c&&d;return!!(l&&(!v||v&&(n.scrollTop>=r&&a<0||n.scrollTop<=0&&a>0))||i&&(!f||f&&(n.scrollLeft>=c&&o<0||n.scrollLeft<=0&&o>0)))&&e(t,n.parentNode,o,a)},re=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},ce={},se=g({inheritAttrs:!1,props:e(e({},Q()),{getContainer:Function,getOpenCount:Function,scrollLocker:t.any,switchScrollingEffect:Function}),emits:["close","handleClick","change"],setup:function(t,i){var r,c=i.emit,s=i.slots,u=b({startPos:{x:null,y:null}}),d=w(),v=w(),f=w(),p=w(),h=w(),m=[],y="drawer_id_".concat(Number((Date.now()+Math.random()).toString().replace(".",Math.round(9*Math.random()).toString())).toString(16)),g=!(le||!q)&&{passive:!1};C((function(){k((function(){var e,n=t.open,o=t.getContainer,a=t.showMask,l=t.autofocus,i=null==o?void 0:o();H(t),n&&(i&&i.parentNode===document.body&&(ce[y]=n),R(),k((function(){l&&L()})),a&&(null===(e=t.scrollLocker)||void 0===e||e.lock()))}))})),x((function(){return t.level}),(function(){H(t)}),{flush:"post"}),x((function(){return t.open}),(function(){var e=t.open,n=t.getContainer,o=t.scrollLocker,a=t.showMask,l=t.autofocus,i=null==n?void 0:n();i&&i.parentNode===document.body&&(ce[y]=!!e),R(),e?(l&&L(),a&&(null==o||o.lock())):null==o||o.unLock()}),{flush:"post"}),E((function(){var e,n=t.open;delete ce[y],n&&(X(!1),document.body.style.touchAction=""),null===(e=t.scrollLocker)||void 0===e||e.unLock()})),x((function(){return t.placement}),(function(e){e&&(h.value=null)}));var L=function(){var e,t;null===(t=null===(e=v.value)||void 0===e?void 0:e.focus)||void 0===t||t.call(e)},T=function(e){e.touches.length>1||(u.startPos={x:e.touches[0].clientX,y:e.touches[0].clientY})},N=function(e){if(!(e.changedTouches.length>1)){var t=e.currentTarget,n=e.changedTouches[0].clientX-u.startPos.x,o=e.changedTouches[0].clientY-u.startPos.y;(t===f.value||t===p.value||t===h.value&&ie(t,e.target,n,o))&&e.cancelable&&e.preventDefault()}},j=function e(t){var n=t.target;oe(n,te,e),n.style.transition=""},M=function(e){c("close",e)},P=function(e){e.keyCode===K.ESC&&(e.stopPropagation(),M(e))},B=function(e){var n=t.open,o=t.afterVisibleChange;e.target===d.value&&e.propertyName.match(/transform$/)&&(v.value.style.transition="",!n&&Y()&&(document.body.style.overflowX="",f.value&&(f.value.style.left="",f.value.style.width="")),o&&o(!!n))},V=O((function(){var e=t.placement,n="left"===e||"right"===e;return{isHorizontal:n,placementName:"translate".concat(n?"X":"Y")}})),R=function(){var e=t.open,n=t.width,o=t.height,a=V.value,l=a.isHorizontal,i=a.placementName,r=h.value?h.value.getBoundingClientRect()[l?"width":"height"]:0;A(e,i,(l?n:o)||r)},X=function(e,n,o,a){var l=t.placement,i=t.levelMove,r=t.duration,c=t.ease,s=t.showMask;m.forEach((function(t){t.style.transition="transform ".concat(r," ").concat(c),ne(t,te,j);var u,d,v,f=e?o:0;if(i){var p=(d={target:t,open:e},v="function"==typeof(u=i)?u(d):u,Array.isArray(v)?2===v.length?v:[v[0],v[1]]:[v]);f=e?p[0]:p[1]||0}var h="number"==typeof f?"".concat(f,"px"):f,m="left"===l||"top"===l?h:"-".concat(h);m=s&&"right"===l&&a?"calc(".concat(m," + ").concat(a,"px)"):m,t.style.transform=f?"".concat(n,"(").concat(m,")"):""}))},A=function(e,t,n){if(!le){var o=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth?J(!0):0;X(e,t,n,o),I(o)}c("change",e)},I=function(e){var n=t.getContainer,o=t.showMask,a=t.open,l=null==n?void 0:n();if(l&&l.parentNode===document.body&&o){var i=["touchstart"],r=[document.body,f.value,p.value,h.value];a&&"hidden"!==document.body.style.overflow?(e&&W(e),document.body.style.touchAction="none",r.forEach((function(e,t){e&&ne(e,i[t]||"touchmove",t?N:T,g)}))):Y()&&(document.body.style.touchAction="",e&&_(e),r.forEach((function(e,t){e&&oe(e,i[t]||"touchmove",t?N:T,g)})))}},W=function(e){var n=t.placement,o=t.duration,a=t.ease,l="width ".concat(o," ").concat(a),i="transform ".concat(o," ").concat(a);switch(v.value.style.transition="none",n){case"right":v.value.style.transform="translateX(-".concat(e,"px)");break;case"top":case"bottom":v.value.style.width="calc(100% - ".concat(e,"px)"),v.value.style.transform="translateZ(0)"}clearTimeout(r),r=setTimeout((function(){v.value&&(v.value.style.transition="".concat(i,",").concat(l),v.value.style.width="",v.value.style.transform="")}))},_=function(e){var n,o=t.placement,a=t.duration,l=t.ease;v.value.style.transition="none";var i="width ".concat(a," ").concat(l),c="transform ".concat(a," ").concat(l);switch(o){case"left":v.value.style.width="100%",i="width 0s ".concat(l," ").concat(a);break;case"right":v.value.style.transform="translateX(".concat(e,"px)"),v.value.style.width="100%",i="width 0s ".concat(l," ").concat(a),f.value&&(f.value.style.left="-".concat(e,"px"),f.value.style.width="calc(100% + ".concat(e,"px)"));break;case"top":case"bottom":v.value.style.width="calc(100% + ".concat(e,"px)"),v.value.style.height="100%",v.value.style.transform="translateZ(0)",n="height 0s ".concat(l," ").concat(a)}clearTimeout(r),r=setTimeout((function(){v.value&&(v.value.style.transition="".concat(c,",").concat(n?"".concat(n,","):"").concat(i),v.value.style.transform="",v.value.style.width="",v.value.style.height="")}))},Y=function(){return!Object.keys(ce).some((function(e){return ce[e]}))},H=function(e){var t=e.level,n=e.getContainer;if(!le){var o,a=null==n?void 0:n(),l=a?a.parentNode:null;if(m=[],"all"===t)(l?Array.prototype.slice.call(l.children):[]).forEach((function(e){"SCRIPT"!==e.nodeName&&"STYLE"!==e.nodeName&&"LINK"!==e.nodeName&&e!==a&&m.push(e)}));else t&&(o=t,Array.isArray(o)?o:[o]).forEach((function(e){document.querySelectorAll(e).forEach((function(e){m.push(e)}))}))}},F=function(e){c("handleClick",e)},D=w(!1);return x(v,(function(){k((function(){D.value=!0}))})),function(){var i,r,c,u=t.width,m=t.height,y=t.open,g=t.prefixCls,b=t.placement;t.level,t.levelMove,t.ease,t.duration,t.getContainer,t.onChange,t.afterVisibleChange;var w=t.showMask,C=t.maskClosable,k=t.maskStyle,x=t.keyboard;t.getOpenCount,t.scrollLocker;var E=t.contentWrapperStyle,O=t.style,L=t.class,T=re(t,["width","height","open","prefixCls","placement","level","levelMove","ease","duration","getContainer","onChange","afterVisibleChange","showMask","maskClosable","maskStyle","keyboard","getOpenCount","scrollLocker","contentWrapperStyle","style","class"]),N=y&&D.value,j=n(g,(o(i={},"".concat(g,"-").concat(b),!0),o(i,"".concat(g,"-open"),N),o(i,L,!!L),o(i,"no-mask",!w),i)),R=V.value.placementName,X="left"===b||"top"===b?"-100%":"100%",A=N?"":"".concat(R,"(").concat(X,")");return S("div",a(a({},l(T,["switchScrollingEffect","autofocus"])),{},{tabindex:-1,class:j,style:O,ref:v,onKeydown:N&&x?P:void 0,onTransitionend:B}),[w&&S("div",{class:"".concat(g,"-mask"),onClick:C?M:void 0,style:k,ref:f},null),S("div",{class:"".concat(g,"-content-wrapper"),style:e({transform:A,msTransform:A,width:ae(u)?"".concat(u,"px"):u,height:ae(m)?"".concat(m,"px"):m},E),ref:d},[S("div",{class:"".concat(g,"-content"),ref:h},[null===(r=s.default)||void 0===r?void 0:r.call(s)]),s.handler?S("div",{onClick:F,ref:p},[null===(c=s.handler)||void 0===c?void 0:c.call(s)]):null])])}}});function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.element,o=void 0===n?document.body:n,a={},l=Object.keys(e);return l.forEach((function(e){a[e]=o.style[e]})),l.forEach((function(t){o.style[t]=e[t]})),a}var de={},ve=function(e){if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth||e){var t="ant-scrolling-effect",n=new RegExp("".concat(t),"g"),o=document.body.className;if(e){if(!n.test(o))return;return ue(de),de={},void(document.body.className=o.replace(n,"").trim())}var a=J();if(a&&(de=ue({position:"relative",width:"calc(100% - ".concat(a,"px)")}),!n.test(o))){var l="".concat(o," ").concat(t);document.body.className=l.trim()}}},fe=[],pe=new RegExp("".concat("ant-scrolling-effect"),"g"),he=0,me=new Map,ye=z((function e(t){var n=this;U(this,e),this.getContainer=function(){var e;return null===(e=n.options)||void 0===e?void 0:e.container},this.reLock=function(e){var t=fe.find((function(e){return e.target===n.lockTarget}));t&&n.unLock(),n.options=e,t&&(t.options=e,n.lock())},this.lock=function(){var e;if(!fe.some((function(e){return e.target===n.lockTarget})))if(fe.some((function(e){var t,o=e.options;return(null==o?void 0:o.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})))fe=[].concat(i(fe),[{target:n.lockTarget,options:n.options}]);else{var t=0,o=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body;(o===document.body&&window.innerWidth-document.documentElement.clientWidth>0||o.scrollHeight>o.clientHeight)&&(t=J());var a=o.className;if(0===fe.filter((function(e){var t,o=e.options;return(null==o?void 0:o.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})).length&&me.set(o,ue({width:0!==t?"calc(100% - ".concat(t,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:o})),!pe.test(a)){var l="".concat(a," ").concat("ant-scrolling-effect");o.className=l.trim()}fe=[].concat(i(fe),[{target:n.lockTarget,options:n.options}])}},this.unLock=function(){var e,t=fe.find((function(e){return e.target===n.lockTarget}));if(fe=fe.filter((function(e){return e.target!==n.lockTarget})),t&&!fe.some((function(e){var n,o=e.options;return(null==o?void 0:o.container)===(null===(n=t.options)||void 0===n?void 0:n.container)}))){var o=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body,a=o.className;pe.test(a)&&(ue(me.get(o),{element:o}),me.delete(o),o.className=o.className.replace(pe,"").trim())}},this.lockTarget=he++,this.options=t})),ge=0,be=s(),we={},Ce=function(e){if(!be)return null;if(e){if("string"==typeof e)return document.querySelectorAll(e)[0];if("function"==typeof e)return e();if("object"===u(e)&&e instanceof window.HTMLElement)return e}return document.body},ke=g({name:"PortalWrapper",inheritAttrs:!1,props:{wrapperClassName:String,forceRender:{type:Boolean,default:void 0},getContainer:t.any,visible:{type:Boolean,default:void 0}},setup:function(e,t){var n=t.slots,o=w(),a=w(),l=w(),i=new ye({container:Ce(e.getContainer)}),s=function(){var e,t;null===(t=null===(e=o.value)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(o.value)},u=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t||o.value&&!o.value.parentNode){var n=Ce(e.getContainer);return!!n&&(n.appendChild(o.value),!0)}return!0},d=function(){return be?(o.value||(o.value=document.createElement("div"),u(!0)),v(),o.value):null},v=function(){var t=e.wrapperClassName;o.value&&t&&t!==o.value.className&&(o.value.className=t)};L((function(){v(),u()}));var f=function(){1!==ge||Object.keys(we).length?ge||(ue(we),we={},ve(!0)):(ve(),we=ue({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))},p=N();return C((function(){var t=!1;x([function(){return e.visible},function(){return e.getContainer}],(function(n,o){var a=r(n,2),l=a[0],c=a[1],u=r(o,2),d=u[0],v=u[1];(be&&Ce(e.getContainer)===document.body&&(l&&!d?ge+=1:t&&(ge-=1)),t)&&(("function"==typeof c&&"function"==typeof v?c.toString()!==v.toString():c!==v)&&s(),l&&l!==d&&be&&Ce(c)!==i.getContainer()&&i.reLock({container:Ce(c)}));t=!0}),{immediate:!0,flush:"post"}),k((function(){u()||(l.value=c((function(){p.update()})))}))})),T((function(){var t=e.visible,n=e.getContainer;be&&Ce(n)===document.body&&(ge=t&&ge?ge-1:ge),s(),c.cancel(l.value)})),function(){var t=e.forceRender,o=e.visible,l=null,r={getOpenCount:function(){return ge},getContainer:d,switchScrollingEffect:f,scrollLocker:i};return(t||o||a.value)&&(l=S(Z,{getContainer:d,ref:a},{default:function(){var e;return null===(e=n.default)||void 0===e?void 0:e.call(n,r)}})),l}}}),xe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},Ee=g({inheritAttrs:!1,props:d(e(e({},Q()),{forceRender:{type:Boolean,default:void 0},getContainer:t.oneOfType([t.string,t.func,t.object,t.looseBool])}),{prefixCls:"drawer",placement:"left",getContainer:"body",level:"all",duration:".3s",ease:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",afterVisibleChange:function(){},showMask:!0,maskClosable:!0,maskStyle:{},wrapperClassName:"",keyboard:!0,forceRender:!1,autofocus:!0}),emits:["handleClick","close"],slots:["handler"],setup:function(e,t){var n=t.emit,o=t.slots,l=w(null),i=function(e){n("handleClick",e)},r=function(e){n("close",e)};return function(){e.afterVisibleChange;var t=e.getContainer,n=e.wrapperClassName,c=e.forceRender,s=xe(e,["afterVisibleChange","getContainer","wrapperClassName","forceRender"]),u=null;if(!t)return S("div",{class:n,ref:l},[S(se,a(a({},s),{},{open:e.open,getContainer:function(){return l.value},onClose:r,onHandleClick:i}),o)]);var d=!!o.handler||c;return(d||e.open||l.value)&&(u=S(ke,{visible:e.open,forceRender:d,getContainer:t,wrapperClassName:n},{default:function(t){var n=t.visible,c=t.afterClose,u=xe(t,["visible","afterClose"]);return S(se,a(a(a({ref:l},s),u),{},{open:void 0!==n?n:e.open,afterVisibleChange:void 0!==c?c:e.afterVisibleChange,onClose:r,onHandleClick:i}),o)}})),u}}}),Oe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},Se=f("top","right","bottom","left");f("default","large");var Le={distance:180},Te=v(g({name:"ADrawer",inheritAttrs:!1,props:d({autofocus:{type:Boolean,default:void 0},closable:{type:Boolean,default:void 0},closeIcon:t.any,destroyOnClose:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},getContainer:t.any,maskClosable:{type:Boolean,default:void 0},mask:{type:Boolean,default:void 0},maskStyle:{type:Object,default:void 0},wrapStyle:{type:Object,default:void 0},style:{type:Object,default:void 0},class:t.any,wrapClassName:String,size:{type:String},drawerStyle:{type:Object,default:void 0},headerStyle:{type:Object,default:void 0},bodyStyle:{type:Object,default:void 0},contentWrapperStyle:{type:Object,default:void 0},title:t.any,visible:{type:Boolean,default:void 0},width:t.oneOfType([t.string,t.number]),height:t.oneOfType([t.string,t.number]),zIndex:Number,prefixCls:String,push:t.oneOfType([t.looseBool,{type:Object}]),placement:t.oneOf(Se),keyboard:{type:Boolean,default:void 0},extra:t.any,footer:t.any,footerStyle:{type:Object,default:void 0},level:t.any,levelMove:{type:[Number,Array,Function]},handle:t.any,afterVisibleChange:Function,onAfterVisibleChange:Function,"onUpdate:visible":Function,onClose:Function},{closable:!0,placement:"right",maskClosable:!0,mask:!0,level:null,keyboard:!0,push:Le}),slots:["closeIcon","title","extra","footer","handle"],setup:function(t,a){var i=a.emit,r=a.slots,c=a.attrs,s=w(!1),u=w(!1),d=w(null),v=j("parentDrawerOpts",null),f=p("drawer",t).prefixCls;h(!t.afterVisibleChange,"Drawer","`afterVisibleChange` prop is deprecated, please use `@afterVisibleChange` event instead"),h(void 0===t.wrapStyle,"Drawer","`wrapStyle` prop is deprecated, please use `style` instead"),h(void 0===t.wrapClassName,"Drawer","`wrapClassName` prop is deprecated, please use `class` instead");M("parentDrawerOpts",{setPush:function(){s.value=!0},setPull:function(){s.value=!1,k((function(){g()}))}}),C((function(){t.visible&&v&&v.setPush()})),E((function(){v&&v.setPull()})),x((function(){return t.visible}),(function(e){v&&(e?v.setPush():v.setPull())}),{flush:"post"});var g=function(){var e,t;null===(t=null===(e=d.value)||void 0===e?void 0:e.domFocus)||void 0===t||t.call(e)},b=function(e){i("update:visible",!1),i("close",e)},L=function(e){var n;null===(n=t.afterVisibleChange)||void 0===n||n.call(t,e),i("afterVisibleChange",e)},T=O((function(){return t.destroyOnClose&&!t.visible})),N=function(){T.value&&(t.visible||(u.value=!0))},P=O((function(){var e,n=t.push,o=t.placement;return e="boolean"==typeof n?n?Le.distance:0:n.distance,e=parseFloat(String(e||0)),"left"===o||"right"===o?"translateX(".concat("left"===o?e:-e,"px)"):"top"===o||"bottom"===o?"translateY(".concat("top"===o?e:-e,"px)"):null})),B=O((function(){var e=t.visible,n=t.mask,o=t.placement,a=t.size,l=void 0===a?"default":a,i=t.width,r=t.height;if(!e&&!n)return{};var c={};if("left"===o||"right"===o){var s="large"===l?736:378;c.width=void 0===i?s:i,c.width="string"==typeof c.width?c.width:"".concat(c.width,"px")}else{var u="large"===l?736:378;c.height=void 0===r?u:r,c.height="string"==typeof c.height?c.height:"".concat(c.height,"px")}return c})),V=O((function(){var n=t.zIndex,o=t.wrapStyle,a=t.mask,l=t.style,i=a?{}:B.value;return e(e(e({zIndex:n,transform:s.value?P.value:void 0},i),o),l)})),R=function(e){var a=t.closable,l=t.headerStyle,i=m(r,t,"extra"),c=m(r,t,"title");return c||a?S("div",{class:n("".concat(e,"-header"),o({},"".concat(e,"-header-close-only"),a&&!c&&!i)),style:l},[S("div",{class:"".concat(e,"-header-title")},[X(e),c&&S("div",{class:"".concat(e,"-title")},[c])]),i&&S("div",{class:"".concat(e,"-extra")},[i])]):null},X=function(e){var n,o=t.closable,a=r.closeIcon?null===(n=r.closeIcon)||void 0===n?void 0:n.call(r):t.closeIcon;return o&&S("button",{key:"closer",onClick:b,"aria-label":"Close",class:"".concat(e,"-close")},[void 0===a?S(y,null,null):a])},A=function(e){var n=m(r,t,"footer");if(!n)return null;var o="".concat(e,"-footer");return S("div",{class:o,style:t.footerStyle},[n])};return function(){var a;t.width,t.height;var i=t.visible,s=t.placement,v=t.mask,p=t.wrapClassName,h=t.class,m=Oe(t,["width","height","visible","placement","mask","wrapClassName","class"]),y=v?B.value:{},g=v?"":"no-mask",w=e(e(e(e({},c),l(m,["size","closeIcon","closable","destroyOnClose","drawerStyle","headerStyle","bodyStyle","title","push","wrapStyle","onAfterVisibleChange","onClose","onUpdate:visible"])),y),{onClose:b,afterVisibleChange:L,handler:!1,prefixCls:f.value,open:i,showMask:v,placement:s,class:n((a={},o(a,h,h),o(a,p,!!p),o(a,g,!!g),a)),style:V.value,ref:d});return S(Ee,w,{handler:t.handle?function(){return t.handle}:r.handle,default:function(){return function(n){var o;if(u.value&&!t.visible)return null;u.value=!1;var a=t.bodyStyle,l=t.drawerStyle,i={};return T.value&&(i.opacity=0,i.transition="opacity .3s"),S("div",{class:"".concat(n,"-wrapper-body"),style:e(e({},i),l),onTransitionend:N},[R(n),S("div",{key:"body",class:"".concat(n,"-body"),style:a},[null===(o=r.default)||void 0===o?void 0:o.call(r)]),A(n)])}(f.value)}})}}}));const Ne=(e,t,n,o=!0)=>{const a="ontouchstart"in document.documentElement,l=e.getContext("2d");function i(e,t,n,o){l&&(l.beginPath(),l.moveTo(e,t),l.lineTo(n,o),l.stroke())}l&&(l.fillStyle=t,l.strokeStyle=t,l.lineWidth=n,l.lineCap="round");let r,c=!1;function s(e){c=!0;const t=e.touches[0].pageX,n=e.touches[0].pageY;r=[t,n]}function u(e){c=!0;const t=e.touches[0].pageX,n=e.touches[0].pageY;i(r[0],r[1],t,n),r=[t,n]}function d(){c=!1}function v(e){c=!0,r=[e.offsetX,e.offsetY]}function f(e){c&&(i(r[0],r[1],e.offsetX,e.offsetY),r=[e.offsetX,e.offsetY])}document.getElementById("clear").addEventListener("click",(()=>{a?(e.removeEventListener("touchstart",s,!1),e.removeEventListener("touchmove",u,!1),e.removeEventListener("touchend",d,!1)):(e.removeEventListener("mousedown",v),e.removeEventListener("mousemove",f),e.removeEventListener("mouseup",d))})),a&&o?(e.addEventListener("touchstart",s,!1),e.addEventListener("touchmove",u,!1),e.addEventListener("touchend",d,!1)):!a&&o&&(e.addEventListener("mousedown",v),e.addEventListener("mousemove",f),e.addEventListener("mouseup",d))},je=(e,t,n)=>new Promise(((o,a)=>{const l=e.toDataURL(n||"image",t||1),i=new Image;i.src=l,i.onload=()=>{o(i)},i.onerror=e=>{a(e)}}));const Me=e=>(F("data-v-214c6d73"),e=e(),D(),e),Pe={class:"wrap"},Be={id:"canvasWrap"},Ve={class:"selector"},Re=H("画板设置"),Xe=H("清空画布内容"),Ae=H("橡皮擦"),Ie=H("继续绘画"),We={class:"setting"},_e={class:"section"},Ye=Me((()=>R("svg",{class:"icon","aria-hidden":"true"},[R("use",{"xlink:href":"#icon-beijingyanse"})],-1))),He={class:"section"},Fe={class:"section"},De=Me((()=>R("svg",{class:"icon","aria-hidden":"true"},[R("use",{"xlink:href":"#icon-beijingyanse"})],-1))),ze={class:"section changeHeight"},Ue={class:"section"};var $e=P(g({name:"Canvas",setup(e){const t=w(),n=w("#000000"),o=w(4),a=w("#ffffff"),l=w(parseInt(document.body.getBoundingClientRect().height.toString(),10)),i=()=>{Ne(t.value,n.value,o.value)};C((()=>{t.value.width=document.body.getBoundingClientRect().width,t.value.height=document.body.getBoundingClientRect().height,Ne(t.value,n.value,o.value)}));const r=w(!1),c=()=>{r.value=!0},s=async()=>{const e=await(async()=>{let e;try{e=await je(t.value,1,"image")}catch(n){}return e})();t.value.width=document.body.getBoundingClientRect().width,t.value.height=l.value;t.value.getContext("2d").drawImage(e,0,0),i(),r.value=!1},u=()=>{const e=t.value.getContext("2d");e&&(e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.value.width,t.value.height),e.restore())},d=w();function v(e){const t=e.touches[0].pageX,n=e.touches[0].pageY;d.value.style.top=`${n}px`,d.value.style.left=`${t}px`}function f(e){d.value.style.display="block";const n=e.touches[0].pageX,o=e.touches[0].pageY;d.value.style.top=`${o}px`,d.value.style.left=`${n}px`;t.value.getContext("2d").clearRect(n,o,m.value,m.value)}function p(){d.value.style.display="none",t.value.removeEventListener("touchstart",v),t.value.removeEventListener("touchmove",f),t.value.removeEventListener("touchend",p)}const h=w(!1),m=w(20);function y(e){h.value=!0;const t=e.offsetX,n=e.offsetY;d.value.style.top=`${n}px`,d.value.style.left=`${t}px`}function g(e){if(h.value){const n=e.offsetX,o=e.offsetY;d.value.style.display="block",d.value.style.top=`${o}px`,d.value.style.left=`${n}px`;t.value.getContext("2d").clearRect(n,o,m.value,m.value)}}function b(){h.value=!1,d.value.style.display="none",t.value.removeEventListener("mousedown",y),t.value.removeEventListener("mousemove",g),document.documentElement.removeEventListener("mouseup",b)}const k=()=>{Ne(t.value,n.value,o.value)},x=()=>{Ne(t.value,"transparent",1,!1);"ontouchstart"in document.documentElement?(t.value.addEventListener("touchstart",v),t.value.addEventListener("touchmove",f),t.value.addEventListener("touchend",p)):(t.value.addEventListener("mousedown",y),t.value.addEventListener("mousemove",g),document.documentElement.addEventListener("mouseup",b))};return(e,v)=>{const f=$,p=Te;return B(),V("div",Pe,[R("div",Be,[R("canvas",{ref_key:"canvasEl",ref:t,style:X({background:a.value}),class:"canvasEl"},null,4),R("div",Ve,[S(f,{type:"primary",onClick:c},{default:A((()=>[Re])),_:1}),S(f,{type:"primary",onClick:u},{default:A((()=>[Xe])),_:1}),S(f,{type:"primary",id:"clear",onClick:I(x,["prevent"])},{default:A((()=>[Ae])),_:1},8,["onClick"]),S(f,{type:"primary",onClick:k},{default:A((()=>[Ie])),_:1})])]),S(p,{visible:r.value,"onUpdate:visible":v[5]||(v[5]=e=>r.value=e),class:"custom-class",width:"30%",closable:!1,title:"画板设置",placement:"right"},{default:A((()=>[R("div",We,[R("div",_e,[R("p",null,"线条颜色:"+W(n.value),1),R("label",null,[Ye,_(R("input",{type:"color","onUpdate:modelValue":v[0]||(v[0]=e=>n.value=e),onChange:i},null,544),[[Y,n.value]])])]),R("div",He,[R("p",null,"线条宽度:"+W(o.value),1),R("label",null,[_(R("input",{type:"text","onUpdate:modelValue":v[1]||(v[1]=e=>o.value=e),onChange:i,style:{"max-width":"50px"}},null,544),[[Y,o.value,void 0,{number:!0}]])])]),R("div",Fe,[R("p",null,"画布颜色:"+W(a.value),1),R("label",null,[De,_(R("input",{type:"color","onUpdate:modelValue":v[2]||(v[2]=e=>a.value=e),onChange:i},null,544),[[Y,a.value]])])]),R("div",ze,[R("p",null,"画布高度:"+W(l.value),1),R("label",null,[_(R("input",{type:"text","onUpdate:modelValue":v[3]||(v[3]=e=>l.value=e),style:{"max-width":"50px"},onChange:s},null,544),[[Y,l.value,void 0,{number:!0}]])])]),R("div",Ue,[R("p",null,"橡皮擦宽度:"+W(m.value),1),R("label",null,[_(R("input",{type:"text","onUpdate:modelValue":v[4]||(v[4]=e=>m.value=e),style:{"max-width":"50px"}},null,512),[[Y,m.value,void 0,{number:!0}]])])])])])),_:1},8,["visible"]),R("div",{ref_key:"clearTag",ref:d,id:"clearTag"},null,512)])}}}),[["__scopeId","data-v-214c6d73"]]);export{$e as default};
