import"./default-6e83181f.js";import{B as e}from"./index-a18be3c6.js";import{I as t}from"./index-4fe58651.js";import{_ as a,d as s,W as l,r,e as i,i as c,j as o,w as n,X as u,k as d,a as p,m,f as v,c as f,l as y,s as _,u as h}from"./index-51d32f2b.js";import{a as b}from"./article-2cadc18c.js";import{p as j}from"./marked.esm-3fd1c616.js";import"./index-291fc263.js";import"./index-dcf8838a.js";import"./raf-cb3d651e.js";import"./isObjectLike-9a344489.js";import"./vnode-13f0d3da.js";import"./FormItemContext-03e74a16.js";import"./omit-22df1d32.js";import"./axios-0933a447.js";import"./classCallCheck-5d344be6.js";import"./SearchOutlined-1a976672.js";import"./index-7a3a94b4.js";const k={class:"write-article-wrap"};var x=a(s({__name:"InputTextarea",setup(e){const t=b(),{body:a}=l(t),s=r("");i((()=>{s.value=a.value}));const p=e=>{const a=e.target;t.$patch((e=>{e.scrollHeight=a.scrollTop}))},m=()=>{t.$patch((e=>{e.body=s.value})),t.saveLocal()};return(e,t)=>(c(),o("div",k,[n(d("textarea",{id:"article-text",class:"article-write",onScroll:p,onInput:m,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e)},null,544),[[u,s.value]])]))}}),[["__scopeId","data-v-d85e830c"]]);const g={class:"read-article"},C=["innerHTML"];var L=a(s({__name:"OutputTextarea",setup(e){const t=b(),{body:a,scrollHeight:s}=l(t),n=p((()=>j(a.value||""))),u=r();return i((()=>{u.value&&(u.value.scrollTop=s.value)})),(e,t)=>(c(),o("div",g,[d("div",{class:"article-read",ref_key:"outputArticle",ref:u,contenteditable:"false",innerHTML:m(n)},null,8,C)]))}}),[["__scopeId","data-v-2a469f60"]]);const w={class:"action"},$=_("代码块"),I=_("图片"),A=_("加粗"),T=_("斜体"),O=_("删除线"),H=_("无序列表"),S=_("有序列表"),B=_("超链接");var E=a(s({__name:"ArticleAction",setup(t){const a=r();v((()=>{a.value=document.getElementById("article-text")}));const s=b(),{body:i}=l(s);function n(e,t,a){const l=e.selectionStart,r=e.selectionEnd;if(e.selectionStart){const c=`${i.value.substring(0,l)+t+i.value.substring(l,r)}${a}${i.value.substring(r,i.value.length)}`;e.value=c,s.$patch((e=>{e.body=c})),s.saveLocal()}else{const l=t+e.value+a;e.value=l,s.$patch((e=>{e.body=l})),s.saveLocal()}}const u=e=>{"code"===e?n(a.value,"```","```"):"img"===e?n(a.value,"![在这里插入图片描述]","(图片链接)"):"weight"===e?n(a.value,"**","**"):"scale"===e?n(a.value,"*","*"):"delete"===e?n(a.value,"~~","~~"):"unOrderList"===e?n(a.value," - List item",""):"orderedList"===e?n(a.value," 1. List item",""):"link"===e&&n(a.value,"[链接描述]","(链接地址)")};return(t,a)=>{const s=e;return c(),o("div",w,[f(s,{type:"primary",onClick:a[0]||(a[0]=e=>u("code"))},{default:y((()=>[$])),_:1}),f(s,{type:"primary",onClick:a[1]||(a[1]=e=>u("img"))},{default:y((()=>[I])),_:1}),f(s,{type:"primary",onClick:a[2]||(a[2]=e=>u("weight"))},{default:y((()=>[A])),_:1}),f(s,{type:"primary",onClick:a[3]||(a[3]=e=>u("scale"))},{default:y((()=>[T])),_:1}),f(s,{type:"primary",onClick:a[4]||(a[4]=e=>u("delete"))},{default:y((()=>[O])),_:1}),f(s,{type:"primary",onClick:a[5]||(a[5]=e=>u("unOrderList"))},{default:y((()=>[H])),_:1}),f(s,{type:"primary",onClick:a[6]||(a[6]=e=>u("orderedList"))},{default:y((()=>[S])),_:1}),f(s,{type:"primary",onClick:a[7]||(a[7]=e=>u("link"))},{default:y((()=>[B])),_:1})])}}}),[["__scopeId","data-v-d29eb6d4"]]);const M={class:"wrap"},P={class:"title-wrap"},U=_(" 文章标题 "),F=_("保存为草稿"),V=_("发布文章"),W={class:"article-wrap"},X={class:"input-textarea"},q={class:"output-textarea"};var z=a(s({__name:"AddArticle",setup(a){const s=b(),n=h();s.getLastArticle();const{title:u}=l(s),p=r("");i((()=>{p.value=u.value}));const m=()=>{s.$patch((e=>{e.title=p.value})),s.saveLocal()},v=()=>{s.createArticle({isPublic:!1,state:"draft"}).then((e=>{n.push(`/success/${e.identity_number}`)}),(()=>{n.push("/fail")}))},_=()=>{s.createArticle({isPublic:!1,state:"normal"}).then((e=>{n.push(`/success/${e.identity_number}`)}),(()=>{n.push("/fail")}))};return(a,s)=>{const l=t,r=e;return c(),o("div",M,[d("nav",P,[U,f(l,{class:"title",value:p.value,"onUpdate:value":s[0]||(s[0]=e=>p.value=e),"show-count":"",maxlength:100,onChange:m,placeholder:"请输入标题"},null,8,["value"]),f(r,{type:"primary",onClick:v},{default:y((()=>[F])),_:1}),f(r,{type:"primary",onClick:_},{default:y((()=>[V])),_:1})]),d("section",null,[f(E)]),d("main",W,[d("section",X,[f(x)]),d("section",q,[f(L)])])])}}}),[["__scopeId","data-v-f2ce2f1a"]]);export{z as default};
