import{P as e,f as n,e as t,_ as r}from"./default-add53953.js";import{R as u}from"./index-761661f6.js";import{d as a,l,a as i,k as o,r as s,x as v,c as f,s as c}from"./index-461f95cc.js";var d=Symbol("OverflowContextProviderKey"),p=a({name:"OverflowContextProvider",inheritAttrs:!1,props:{value:{type:Object}},setup:function(e,n){var t=n.slots;return l(d,i((function(){return e.value}))),function(){var e;return null===(e=t.default)||void 0===e?void 0:e.call(t)}}}),m=globalThis&&globalThis.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(r=Object.getOwnPropertySymbols(e);u<r.length;u++)n.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(e,r[u])&&(t[r[u]]=e[r[u]])}return t},y=a({name:"Item",props:{prefixCls:String,item:e.any,renderItem:Function,responsive:Boolean,itemKey:{type:[String,Number]},registerSize:Function,display:Boolean,order:Number,component:e.any,invalidate:Boolean},setup:function(e,r){var a=r.slots,l=r.expose,o=i((function(){return e.responsive&&!e.display})),c=s();function d(n){e.registerSize(e.itemKey,n)}return l({itemNodeRef:c}),v((function(){d(null)})),function(){var r,l=e.prefixCls,i=e.invalidate,s=e.item,v=e.renderItem,p=e.responsive;e.registerSize,e.itemKey,e.display;var y,b=e.order,g=e.component,h=void 0===g?"div":g,x=m(e,["prefixCls","invalidate","item","renderItem","responsive","registerSize","itemKey","display","order","component"]),O=null===(r=a.default)||void 0===r?void 0:r.call(a),S=v&&undefined!==s?v(s):O;i||(y={opacity:o.value?0:1,height:o.value?0:undefined,overflowY:o.value?"hidden":undefined,order:p?b:undefined,pointerEvents:o.value?"none":undefined,position:o.value?"absolute":undefined});var w={};return o.value&&(w["aria-hidden"]=!0),f(u,{disabled:!p,onResize:function(e){d(e.offsetWidth)}},{default:function(){return f(h,n(n(n({class:t(!i&&l),style:y},w),x),{},{ref:c}),{default:function(){return[S]}})}})}}}),b=globalThis&&globalThis.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(r=Object.getOwnPropertySymbols(e);u<r.length;u++)n.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(e,r[u])&&(t[r[u]]=e[r[u]])}return t},g=a({name:"RawItem",inheritAttrs:!1,props:{component:e.any,title:e.any,id:String,onMouseenter:{type:Function},onMouseleave:{type:Function},onClick:{type:Function},onKeydown:{type:Function},onFocus:{type:Function}},setup:function(e,r){var u=r.slots,a=r.attrs,l=o(d,i((function(){return null})));return function(){var r;if(!l.value){var i=e.component,o=void 0===i?"div":i,s=b(e,["component"]);return f(o,n(n({},s),a),{default:function(){return[null===(r=u.default)||void 0===r?void 0:r.call(u)]}})}var v=l.value,c=v.className,d=b(v,["className"]),m=a.class,g=b(a,["class"]);return f(p,{value:null},{default:function(){return[f(y,n(n(n({class:t(c,m)},d),g),e),u)]}})}}}),h=globalThis&&globalThis.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(r=Object.getOwnPropertySymbols(e);u<r.length;u++)n.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(e,r[u])&&(t[r[u]]=e[r[u]])}return t};function x(e){return"+ ".concat(e.length," ...")}var O=a({name:"Overflow",inheritAttrs:!1,props:{id:String,prefixCls:String,data:Array,itemKey:[String,Number,Function],itemWidth:{type:Number,default:10},renderItem:Function,renderRawItem:Function,maxCount:[Number,String],renderRest:Function,renderRawRest:Function,suffix:e.any,component:String,itemComponent:e.any,onVisibleChange:Function,ssr:String,onMousedown:Function},emits:["visibleChange"],setup:function(e,a){var l=a.attrs,o=a.emit,v=a.slots,d=i((function(){return"full"===e.ssr})),m=s(null),b=i((function(){return m.value||0})),g=s(new Map),O=s(0),S=s(0),w=s(0),C=s(null),I=s(null),F=i((function(){return null===I.value&&d.value?Number.MAX_SAFE_INTEGER:I.value||0})),j=s(!1),R=i((function(){return"".concat(e.prefixCls,"-item")})),N=i((function(){return Math.max(O.value,S.value)})),K=i((function(){return!(!e.data.length||"responsive"!==e.maxCount)})),E=i((function(){return"invalidate"===e.maxCount})),P=i((function(){return K.value||"number"==typeof e.maxCount&&e.data.length>e.maxCount})),M=i((function(){var n=e.data;return K.value?n=null===m.value&&d.value?e.data:e.data.slice(0,Math.min(e.data.length,b.value/e.itemWidth)):"number"==typeof e.maxCount&&(n=e.data.slice(0,e.maxCount)),n})),_=i((function(){return K.value?e.data.slice(F.value+1):e.data.slice(M.value.length)})),z=function(n,t){var r,u;return"function"==typeof e.itemKey?e.itemKey(n):null!==(u=e.itemKey&&(null===(r=n)||void 0===r?void 0:r[e.itemKey]))&&void 0!==u?u:t},A=i((function(){return e.renderItem||function(e){return e}})),T=function(n,t){I.value=n,t||(j.value=n<e.data.length-1,o("visibleChange",n))},k=function(e,n){m.value=n.clientWidth},W=function(e,n){var t=new Map(g.value);null===n?t.delete(e):t.set(e,n),g.value=t},B=function(e,n){O.value=S.value,S.value=n},V=function(e,n){w.value=n},G=function(e){return g.value.get(z(M.value[e],e))};return c([b,g,S,w,function(){return e.itemKey},M],(function(){if(b.value&&N.value&&M.value){var n=w.value,t=M.value.length,r=t-1;if(!t)return T(0),void(C.value=null);for(var u=0;u<t;u+=1){var a=G(u);if(void 0===a){T(u-1,!0);break}if(n+=a,0===r&&n<=b.value||u===r-1&&n+G(r)<=b.value){T(r),C.value=null;break}if(n+N.value>b.value){T(u-1),C.value=n-a-w.value+S.value;break}}e.suffix&&G(0)+w.value>b.value&&(C.value=null)}})),function(){var a=j.value&&!!_.value.length,i=e.itemComponent,o=e.renderRawItem,s=e.renderRawRest,c=e.renderRest,d=e.prefixCls,m=void 0===d?"rc-overflow":d,b=e.suffix,g=e.component,O=void 0===g?"div":g,S=e.id,w=e.onMousedown,I=l.class,N=l.style,T=h(l,["class","style"]),G={};null!==C.value&&K.value&&(G={position:"absolute",left:"".concat(C.value,"px"),top:0});var X={prefixCls:R.value,responsive:K.value,component:i,invalidate:E.value},D=o?function(e,n){var t=z(e,n);return f(p,{key:t,value:r(r({},X),{order:n,item:e,itemKey:t,registerSize:W,display:n<=F.value})},{default:function(){return[o(e,n)]}})}:function(e,t){var r=z(e,t);return f(y,n(n({},X),{},{order:t,key:r,item:e,renderItem:A.value,itemKey:r,registerSize:W,display:t<=F.value}),null)},L=function(){return null},Y={order:a?F.value:Number.MAX_SAFE_INTEGER,className:"".concat(R.value," ").concat(R.value,"-rest"),registerSize:B,display:a};if(s)s&&(L=function(){return f(p,{value:r(r({},X),Y)},{default:function(){return[s(_.value)]}})});else{var q=c||x;L=function(){return f(y,n(n({},X),Y),{default:function(){return"function"==typeof q?q(_.value):q}})}}return f(u,{disabled:!K.value,onResize:k},{default:function(){var e;return f(O,n({id:S,class:t(!E.value&&m,I),style:N,onMousedown:w},T),{default:function(){return[M.value.map(D),P.value?L():null,b&&f(y,n(n({},X),{},{order:F.value,class:"".concat(R.value,"-suffix"),registerSize:V,display:!0,style:G}),{default:function(){return b}}),null===(e=v.default)||void 0===e?void 0:e.call(v)]}})}})}}});O.Item=g,O.RESPONSIVE="responsive",O.INVALIDATE="invalidate";var S=O;export{S as O};
