import{_ as e,a as r,d as t}from"./default-add53953.js";import{a,k as s,l as i,m as n}from"./index-461f95cc.js";import{h as o}from"./axios-10bb5b34.js";var c=["xxxl","xxl","xl","lg","md","sm","xs"],m={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)",xxxl:"(min-width: 2000px)"},u=new Map,l=-1,d={},v={matchHandlers:{},dispatch:function(e){return d=e,u.forEach((function(e){return e(d)})),u.size>=1},subscribe:function(e){return u.size||this.register(),l+=1,u.set(l,e),e(d),l},unsubscribe:function(e){u.delete(e),u.size||this.unregister()},unregister:function(){var e=this;Object.keys(m).forEach((function(r){var t=m[r],a=e.matchHandlers[t];null==a||a.mql.removeListener(null==a?void 0:a.listener)})),u.clear()},register:function(){var t=this;Object.keys(m).forEach((function(a){var s=m[a],i=function(s){var i=s.matches;t.dispatch(e(e({},d),r({},a,i)))},n=window.matchMedia(s);n.addListener(i),t.matchHandlers[s]={mql:n,listener:i},i(n)}))}},h=Symbol("SizeProvider"),f=function(e){var r=s("configProvider",t),n=a((function(){return e.size||r.componentSize}));return i(h,n),n},w=function(e){return e?a((function(){return e.size})):s(h,a((function(){return"default"})))};const p=n("userInfo",{state:()=>({username:"",email:"",avatar_url:""}),getters:{},actions:{async login(e){try{const{username:r,email:t,token:a}=await o("/login","POST",{username:e.user,password:e.password});return this.username=r,this.email=t,window.localStorage.setItem("_AUTH_TOKEN",a),Promise.resolve({username:r,email:t,token:a})}catch(r){return Promise.reject(r)}},async resetPass(e){try{const{msg:r}=await o("/resetPass","post",{email:e.email,password:e.password,securityCode:e.securityCode});return Promise.resolve({msg:r})}catch(r){return Promise.reject(r)}},async getSecurityCode(e){try{const{msg:r}=await o("/securityCode","post",{email:e.email,type:e.type});return Promise.resolve({msg:r})}catch(r){return Promise.reject(r)}},async register(e){try{const{msg:r}=await o("/register","post",{username:e.username,email:e.email,password:e.password,securityCode:e.securityCode});return Promise.resolve({msg:r})}catch(r){return Promise.reject(r)}},async getUserInfo(){try{const{username:e,email:r}=await o("/user/info","GET");return this.username=e,this.email=r,Promise.resolve({username:e,email:r})}catch(e){return Promise.reject(e)}},getLastAvatar(){this.avatar_url=window.localStorage.getItem("avatar")||""},async getUserAvatar(){try{const{avatar_url:e}=await o("/avatar","GET");return this.avatar_url=e,window.localStorage.setItem("avatar",e),Promise.resolve({avatar_url:e})}catch(e){return Promise.reject(e)}},async updateUserAvatar(e){try{return await o("/avatar/update","POST",{avatar_file:e.avatar_file}),this.avatar_url=e.avatar_file,window.localStorage.setItem("avatar",e.avatar_file),Promise.resolve({avatar_url:e.avatar_file})}catch(r){return Promise.reject(r)}}}});export{w as a,c as b,f as c,v as r,p as u};
