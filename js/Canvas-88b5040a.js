import{_ as e,P as t,c as n,d as o,b as a,a as l,e as i,h as r,f as c,w as s,t as u,u as d,l as v,m as f,j as p}from"./default-94dd01ba.js";import{o as h,w as m,i as y,B as g}from"./index-49254fa7.js";import{d as b,j as w,r as C,e as k,q as x,b as E,o as S,c as O,a as L,u as T,g as N,l as j,i as M,p as P,_ as B,C as V,D as A,G as I,Y as R,E as W,S as X,W as _,w as Y,V as H,f as F,H as D,I as z}from"./index-7f18b97f.js";import{K as U}from"./KeyCode-a2a1cb88.js";import{s as $,P as K}from"./Portal-f011f3d4.js";import{_ as q,a as Z}from"./classCallCheck-5d344be6.js";var G;function J(e){if("undefined"==typeof document)return 0;if(e||void 0===G){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),o=n.style;o.position="absolute",o.top="0",o.left="0",o.pointerEvents="none",o.visibility="hidden",o.width="200px",o.height="150px",o.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var a=t.offsetWidth;n.style.overflow="scroll";var l=t.offsetWidth;a===l&&(l=n.clientWidth),document.body.removeChild(n),G=a-l}return G}var Q=function(){return{prefixCls:String,width:t.oneOfType([t.string,t.number]),height:t.oneOfType([t.string,t.number]),style:{type:Object,default:void 0},class:String,placement:{type:String},wrapperClassName:String,level:{type:[String,Array]},levelMove:{type:[Number,Function,Array]},duration:String,ease:String,showMask:{type:Boolean,default:void 0},maskClosable:{type:Boolean,default:void 0},maskStyle:{type:Object,default:void 0},afterVisibleChange:Function,keyboard:{type:Boolean,default:void 0},contentWrapperStyle:{type:Object,default:void 0},autofocus:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0}}};var ee={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},te=ee[Object.keys(ee).filter((function(e){if("undefined"==typeof document)return!1;var t=document.getElementsByTagName("html")[0];return e in(t?t.style:{})}))[0]];function ne(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on".concat(t),n)}function oe(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.attachEvent&&e.detachEvent("on".concat(t),n)}var ae=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},le=!("undefined"!=typeof window&&window.document&&window.document.createElement),ie=function e(t,n,o,a){if(!n||n===document||n instanceof Document)return!1;if(n===t.parentNode)return!0;var l=Math.max(Math.abs(o),Math.abs(a))===Math.abs(a),i=Math.max(Math.abs(o),Math.abs(a))===Math.abs(o),r=n.scrollHeight-n.clientHeight,c=n.scrollWidth-n.clientWidth,s=document.defaultView.getComputedStyle(n),u="auto"===s.overflowY||"scroll"===s.overflowY,d="auto"===s.overflowX||"scroll"===s.overflowX,v=r&&u,f=c&&d;return!!(l&&(!v||v&&(n.scrollTop>=r&&a<0||n.scrollTop<=0&&a>0))||i&&(!f||f&&(n.scrollLeft>=c&&o<0||n.scrollLeft<=0&&o>0)))&&e(t,n.parentNode,o,a)},re=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},ce={},se=b({inheritAttrs:!1,props:e(e({},Q()),{getContainer:Function,getOpenCount:Function,scrollLocker:t.any,switchScrollingEffect:Function}),emits:["close","handleClick","change"],setup:function(t,l){var i,r=l.emit,c=l.slots,s=w({startPos:{x:null,y:null}}),u=C(),d=C(),v=C(),f=C(),p=C(),m=[],y="drawer_id_".concat(Number((Date.now()+Math.random()).toString().replace(".",Math.round(9*Math.random()).toString())).toString(16)),g=!(le||!$)&&{passive:!1};k((function(){x((function(){var e,n=t.open,o=t.getContainer,a=t.showMask,l=t.autofocus,i=null==o?void 0:o();H(t),n&&(i&&i.parentNode===document.body&&(ce[y]=n),A(),x((function(){l&&b()})),a&&(null===(e=t.scrollLocker)||void 0===e||e.lock()))}))})),E((function(){return t.level}),(function(){H(t)}),{flush:"post"}),E((function(){return t.open}),(function(){var e=t.open,n=t.getContainer,o=t.scrollLocker,a=t.showMask,l=t.autofocus,i=null==n?void 0:n();i&&i.parentNode===document.body&&(ce[y]=!!e),A(),e?(l&&b(),a&&(null==o||o.lock())):null==o||o.unLock()}),{flush:"post"}),S((function(){var e,n=t.open;delete ce[y],n&&(I(!1),document.body.style.touchAction=""),null===(e=t.scrollLocker)||void 0===e||e.unLock()})),E((function(){return t.placement}),(function(e){e&&(p.value=null)}));var b=function(){var e,t;null===(t=null===(e=d.value)||void 0===e?void 0:e.focus)||void 0===t||t.call(e)},T=function(e){e.touches.length>1||(s.startPos={x:e.touches[0].clientX,y:e.touches[0].clientY})},N=function(e){if(!(e.changedTouches.length>1)){var t=e.currentTarget,n=e.changedTouches[0].clientX-s.startPos.x,o=e.changedTouches[0].clientY-s.startPos.y;(t===v.value||t===f.value||t===p.value&&ie(t,e.target,n,o))&&e.cancelable&&e.preventDefault()}},j=function e(t){var n=t.target;oe(n,te,e),n.style.transition=""},M=function(e){r("close",e)},P=function(e){e.keyCode===U.ESC&&(e.stopPropagation(),M(e))},B=function(e){var n=t.open,o=t.afterVisibleChange;e.target===u.value&&e.propertyName.match(/transform$/)&&(d.value.style.transition="",!n&&Y()&&(document.body.style.overflowX="",v.value&&(v.value.style.left="",v.value.style.width="")),o&&o(!!n))},V=O((function(){var e=t.placement,n="left"===e||"right"===e;return{isHorizontal:n,placementName:"translate".concat(n?"X":"Y")}})),A=function(){var e=t.open,n=t.width,o=t.height,a=V.value,l=a.isHorizontal,i=a.placementName,r=p.value?p.value.getBoundingClientRect()[l?"width":"height"]:0;R(e,i,(l?n:o)||r)},I=function(e,n,o,a){var l=t.placement,i=t.levelMove,r=t.duration,c=t.ease,s=t.showMask;m.forEach((function(t){t.style.transition="transform ".concat(r," ").concat(c),ne(t,te,j);var u,d,v,f=e?o:0;if(i){var p=(d={target:t,open:e},v="function"==typeof(u=i)?u(d):u,Array.isArray(v)?2===v.length?v:[v[0],v[1]]:[v]);f=e?p[0]:p[1]||0}var h="number"==typeof f?"".concat(f,"px"):f,m="left"===l||"top"===l?h:"-".concat(h);m=s&&"right"===l&&a?"calc(".concat(m," + ").concat(a,"px)"):m,t.style.transform=f?"".concat(n,"(").concat(m,")"):""}))},R=function(e,t,n){if(!le){var o=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth?J(!0):0;I(e,t,n,o),W(o)}r("change",e)},W=function(e){var n=t.getContainer,o=t.showMask,a=t.open,l=null==n?void 0:n();if(l&&l.parentNode===document.body&&o){var i=["touchstart"],r=[document.body,v.value,f.value,p.value];a&&"hidden"!==document.body.style.overflow?(e&&X(e),document.body.style.touchAction="none",r.forEach((function(e,t){e&&ne(e,i[t]||"touchmove",t?N:T,g)}))):Y()&&(document.body.style.touchAction="",e&&_(e),r.forEach((function(e,t){e&&oe(e,i[t]||"touchmove",t?N:T,g)})))}},X=function(e){var n=t.placement,o=t.duration,a=t.ease,l="width ".concat(o," ").concat(a),r="transform ".concat(o," ").concat(a);switch(d.value.style.transition="none",n){case"right":d.value.style.transform="translateX(-".concat(e,"px)");break;case"top":case"bottom":d.value.style.width="calc(100% - ".concat(e,"px)"),d.value.style.transform="translateZ(0)"}clearTimeout(i),i=setTimeout((function(){d.value&&(d.value.style.transition="".concat(r,",").concat(l),d.value.style.width="",d.value.style.transform="")}))},_=function(e){var n,o=t.placement,a=t.duration,l=t.ease;d.value.style.transition="none";var r="width ".concat(a," ").concat(l),c="transform ".concat(a," ").concat(l);switch(o){case"left":d.value.style.width="100%",r="width 0s ".concat(l," ").concat(a);break;case"right":d.value.style.transform="translateX(".concat(e,"px)"),d.value.style.width="100%",r="width 0s ".concat(l," ").concat(a),v.value&&(v.value.style.left="-".concat(e,"px"),v.value.style.width="calc(100% + ".concat(e,"px)"));break;case"top":case"bottom":d.value.style.width="calc(100% + ".concat(e,"px)"),d.value.style.height="100%",d.value.style.transform="translateZ(0)",n="height 0s ".concat(l," ").concat(a)}clearTimeout(i),i=setTimeout((function(){d.value&&(d.value.style.transition="".concat(c,",").concat(n?"".concat(n,","):"").concat(r),d.value.style.transform="",d.value.style.width="",d.value.style.height="")}))},Y=function(){return!Object.keys(ce).some((function(e){return ce[e]}))},H=function(e){var t=e.level,n=e.getContainer;if(!le){var o,a=null==n?void 0:n(),l=a?a.parentNode:null;if(m=[],"all"===t)(l?Array.prototype.slice.call(l.children):[]).forEach((function(e){"SCRIPT"!==e.nodeName&&"STYLE"!==e.nodeName&&"LINK"!==e.nodeName&&e!==a&&m.push(e)}));else t&&(o=t,Array.isArray(o)?o:[o]).forEach((function(e){document.querySelectorAll(e).forEach((function(e){m.push(e)}))}))}},F=function(e){r("handleClick",e)},D=C(!1);return E(d,(function(){x((function(){D.value=!0}))})),function(){var l,i,r,s=t.width,m=t.height,y=t.open,g=t.prefixCls,b=t.placement;t.level,t.levelMove,t.ease,t.duration,t.getContainer,t.onChange,t.afterVisibleChange;var w=t.showMask,C=t.maskClosable,k=t.maskStyle,x=t.keyboard;t.getOpenCount,t.scrollLocker;var E=t.contentWrapperStyle,S=t.style,O=t.class,T=re(t,["width","height","open","prefixCls","placement","level","levelMove","ease","duration","getContainer","onChange","afterVisibleChange","showMask","maskClosable","maskStyle","keyboard","getOpenCount","scrollLocker","contentWrapperStyle","style","class"]),N=y&&D.value,j=n(g,(o(l={},"".concat(g,"-").concat(b),!0),o(l,"".concat(g,"-open"),N),o(l,O,!!O),o(l,"no-mask",!w),l)),A=V.value.placementName,I="left"===b||"top"===b?"-100%":"100%",R=N?"":"".concat(A,"(").concat(I,")");return L("div",a(a({},h(T,["switchScrollingEffect","autofocus"])),{},{tabindex:-1,class:j,style:S,ref:d,onKeydown:N&&x?P:void 0,onTransitionend:B}),[w&&L("div",{class:"".concat(g,"-mask"),onClick:C?M:void 0,style:k,ref:v},null),L("div",{class:"".concat(g,"-content-wrapper"),style:e({transform:R,msTransform:R,width:ae(s)?"".concat(s,"px"):s,height:ae(m)?"".concat(m,"px"):m},E),ref:u},[L("div",{class:"".concat(g,"-content"),ref:p},[null===(i=c.default)||void 0===i?void 0:i.call(c)]),c.handler?L("div",{onClick:F,ref:f},[null===(r=c.handler)||void 0===r?void 0:r.call(c)]):null])])}}});function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.element,o=void 0===n?document.body:n,a={},l=Object.keys(e);return l.forEach((function(e){a[e]=o.style[e]})),l.forEach((function(t){o.style[t]=e[t]})),a}var de={},ve=function(e){if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth||e){var t="ant-scrolling-effect",n=new RegExp("".concat(t),"g"),o=document.body.className;if(e){if(!n.test(o))return;return ue(de),de={},void(document.body.className=o.replace(n,"").trim())}var a=J();if(a&&(de=ue({position:"relative",width:"calc(100% - ".concat(a,"px)")}),!n.test(o))){var l="".concat(o," ").concat(t);document.body.className=l.trim()}}},fe=[],pe=new RegExp("".concat("ant-scrolling-effect"),"g"),he=0,me=new Map,ye=q((function e(t){var n=this;Z(this,e),this.getContainer=function(){var e;return null===(e=n.options)||void 0===e?void 0:e.container},this.reLock=function(e){var t=fe.find((function(e){return e.target===n.lockTarget}));t&&n.unLock(),n.options=e,t&&(t.options=e,n.lock())},this.lock=function(){var e;if(!fe.some((function(e){return e.target===n.lockTarget})))if(fe.some((function(e){var t,o=e.options;return(null==o?void 0:o.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})))fe=[].concat(l(fe),[{target:n.lockTarget,options:n.options}]);else{var t=0,o=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body;(o===document.body&&window.innerWidth-document.documentElement.clientWidth>0||o.scrollHeight>o.clientHeight)&&(t=J());var a=o.className;if(0===fe.filter((function(e){var t,o=e.options;return(null==o?void 0:o.container)===(null===(t=n.options)||void 0===t?void 0:t.container)})).length&&me.set(o,ue({width:0!==t?"calc(100% - ".concat(t,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:o})),!pe.test(a)){var i="".concat(a," ").concat("ant-scrolling-effect");o.className=i.trim()}fe=[].concat(l(fe),[{target:n.lockTarget,options:n.options}])}},this.unLock=function(){var e,t=fe.find((function(e){return e.target===n.lockTarget}));if(fe=fe.filter((function(e){return e.target!==n.lockTarget})),t&&!fe.some((function(e){var n,o=e.options;return(null==o?void 0:o.container)===(null===(n=t.options)||void 0===n?void 0:n.container)}))){var o=(null===(e=n.options)||void 0===e?void 0:e.container)||document.body,a=o.className;pe.test(a)&&(ue(me.get(o),{element:o}),me.delete(o),o.className=o.className.replace(pe,"").trim())}},this.lockTarget=he++,this.options=t})),ge=0,be=r(),we={},Ce=function(e){if(!be)return null;if(e){if("string"==typeof e)return document.querySelectorAll(e)[0];if("function"==typeof e)return e();if("object"===c(e)&&e instanceof window.HTMLElement)return e}return document.body},ke=b({name:"PortalWrapper",inheritAttrs:!1,props:{wrapperClassName:String,forceRender:{type:Boolean,default:void 0},getContainer:t.any,visible:{type:Boolean,default:void 0}},setup:function(e,t){var n=t.slots,o=C(),a=C(),l=C(),r=new ye({container:Ce(e.getContainer)}),c=function(){var e,t;null===(t=null===(e=o.value)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(o.value)},s=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t||o.value&&!o.value.parentNode){var n=Ce(e.getContainer);return!!n&&(n.appendChild(o.value),!0)}return!0},u=function(){return be?(o.value||(o.value=document.createElement("div"),s(!0)),d(),o.value):null},d=function(){var t=e.wrapperClassName;o.value&&t&&t!==o.value.className&&(o.value.className=t)};T((function(){d(),s()}));var v=function(){1!==ge||Object.keys(we).length?ge||(ue(we),we={},ve(!0)):(ve(),we=ue({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))},f=j();return k((function(){var t=!1;E([function(){return e.visible},function(){return e.getContainer}],(function(n,o){var a=i(n,2),l=a[0],s=a[1],u=i(o,2),d=u[0],v=u[1];(be&&Ce(e.getContainer)===document.body&&(l&&!d?ge+=1:t&&(ge-=1)),t)&&(("function"==typeof s&&"function"==typeof v?s.toString()!==v.toString():s!==v)&&c(),l&&l!==d&&be&&Ce(s)!==r.getContainer()&&r.reLock({container:Ce(s)}));t=!0}),{immediate:!0,flush:"post"}),x((function(){s()||(l.value=m((function(){f.update()})))}))})),N((function(){var t=e.visible,n=e.getContainer;be&&Ce(n)===document.body&&(ge=t&&ge?ge-1:ge),c(),m.cancel(l.value)})),function(){var t=e.forceRender,o=e.visible,l=null,i={getOpenCount:function(){return ge},getContainer:u,switchScrollingEffect:v,scrollLocker:r};return(t||o||a.value)&&(l=L(K,{getContainer:u,ref:a},{default:function(){var e;return null===(e=n.default)||void 0===e?void 0:e.call(n,i)}})),l}}}),xe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},Ee=b({inheritAttrs:!1,props:y(e(e({},Q()),{forceRender:{type:Boolean,default:void 0},getContainer:t.oneOfType([t.string,t.func,t.object,t.looseBool])}),{prefixCls:"drawer",placement:"left",getContainer:"body",level:"all",duration:".3s",ease:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",afterVisibleChange:function(){},showMask:!0,maskClosable:!0,maskStyle:{},wrapperClassName:"",keyboard:!0,forceRender:!1,autofocus:!0}),emits:["handleClick","close"],slots:["handler"],setup:function(e,t){var n=t.emit,o=t.slots,l=C(null),i=function(e){n("handleClick",e)},r=function(e){n("close",e)};return function(){e.afterVisibleChange;var t=e.getContainer,n=e.wrapperClassName,c=e.forceRender,s=xe(e,["afterVisibleChange","getContainer","wrapperClassName","forceRender"]),u=null;if(!t)return L("div",{class:n,ref:l},[L(se,a(a({},s),{},{open:e.open,getContainer:function(){return l.value},onClose:r,onHandleClick:i}),o)]);var d=!!o.handler||c;return(d||e.open||l.value)&&(u=L(ke,{visible:e.open,forceRender:d,getContainer:t,wrapperClassName:n},{default:function(t){var n=t.visible,c=t.afterClose,u=xe(t,["visible","afterClose"]);return L(se,a(a(a({ref:l},s),u),{},{open:void 0!==n?n:e.open,afterVisibleChange:void 0!==c?c:e.afterVisibleChange,onClose:r,onHandleClick:i}),o)}})),u}}}),Se=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},Oe=u("top","right","bottom","left");u("default","large");var Le={distance:180},Te=s(b({name:"ADrawer",inheritAttrs:!1,props:y({autofocus:{type:Boolean,default:void 0},closable:{type:Boolean,default:void 0},closeIcon:t.any,destroyOnClose:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},getContainer:t.any,maskClosable:{type:Boolean,default:void 0},mask:{type:Boolean,default:void 0},maskStyle:{type:Object,default:void 0},wrapStyle:{type:Object,default:void 0},style:{type:Object,default:void 0},class:t.any,wrapClassName:String,size:{type:String},drawerStyle:{type:Object,default:void 0},headerStyle:{type:Object,default:void 0},bodyStyle:{type:Object,default:void 0},contentWrapperStyle:{type:Object,default:void 0},title:t.any,visible:{type:Boolean,default:void 0},width:t.oneOfType([t.string,t.number]),height:t.oneOfType([t.string,t.number]),zIndex:Number,prefixCls:String,push:t.oneOfType([t.looseBool,{type:Object}]),placement:t.oneOf(Oe),keyboard:{type:Boolean,default:void 0},extra:t.any,footer:t.any,footerStyle:{type:Object,default:void 0},level:t.any,levelMove:{type:[Number,Array,Function]},handle:t.any,afterVisibleChange:Function,onAfterVisibleChange:Function,"onUpdate:visible":Function,onClose:Function},{closable:!0,placement:"right",maskClosable:!0,mask:!0,level:null,keyboard:!0,push:Le}),slots:["closeIcon","title","extra","footer","handle"],setup:function(t,a){var l=a.emit,i=a.slots,r=a.attrs,c=C(!1),s=C(!1),u=C(null),m=M("parentDrawerOpts",null),y=d("drawer",t).prefixCls;v(!t.afterVisibleChange,"Drawer","`afterVisibleChange` prop is deprecated, please use `@afterVisibleChange` event instead"),v(void 0===t.wrapStyle,"Drawer","`wrapStyle` prop is deprecated, please use `style` instead"),v(void 0===t.wrapClassName,"Drawer","`wrapClassName` prop is deprecated, please use `class` instead");P("parentDrawerOpts",{setPush:function(){c.value=!0},setPull:function(){c.value=!1,x((function(){g()}))}}),k((function(){t.visible&&m&&m.setPush()})),S((function(){m&&m.setPull()})),E((function(){return t.visible}),(function(e){m&&(e?m.setPush():m.setPull())}),{flush:"post"});var g=function(){var e,t;null===(t=null===(e=u.value)||void 0===e?void 0:e.domFocus)||void 0===t||t.call(e)},b=function(e){l("update:visible",!1),l("close",e)},w=function(e){var n;null===(n=t.afterVisibleChange)||void 0===n||n.call(t,e),l("afterVisibleChange",e)},T=O((function(){return t.destroyOnClose&&!t.visible})),N=function(){T.value&&(t.visible||(s.value=!0))},j=O((function(){var e,n=t.push,o=t.placement;return e="boolean"==typeof n?n?Le.distance:0:n.distance,e=parseFloat(String(e||0)),"left"===o||"right"===o?"translateX(".concat("left"===o?e:-e,"px)"):"top"===o||"bottom"===o?"translateY(".concat("top"===o?e:-e,"px)"):null})),B=O((function(){var e=t.visible,n=t.mask,o=t.placement,a=t.size,l=void 0===a?"default":a,i=t.width,r=t.height;if(!e&&!n)return{};var c={};if("left"===o||"right"===o){var s="large"===l?736:378;c.width=void 0===i?s:i,c.width="string"==typeof c.width?c.width:"".concat(c.width,"px")}else{var u="large"===l?736:378;c.height=void 0===r?u:r,c.height="string"==typeof c.height?c.height:"".concat(c.height,"px")}return c})),V=O((function(){var n=t.zIndex,o=t.wrapStyle,a=t.mask,l=t.style,i=a?{}:B.value;return e(e(e({zIndex:n,transform:c.value?j.value:void 0},i),o),l)})),A=function(e){var a=t.closable,l=t.headerStyle,r=f(i,t,"extra"),c=f(i,t,"title");return c||a?L("div",{class:n("".concat(e,"-header"),o({},"".concat(e,"-header-close-only"),a&&!c&&!r)),style:l},[L("div",{class:"".concat(e,"-header-title")},[I(e),c&&L("div",{class:"".concat(e,"-title")},[c])]),r&&L("div",{class:"".concat(e,"-extra")},[r])]):null},I=function(e){var n,o=t.closable,a=i.closeIcon?null===(n=i.closeIcon)||void 0===n?void 0:n.call(i):t.closeIcon;return o&&L("button",{key:"closer",onClick:b,"aria-label":"Close",class:"".concat(e,"-close")},[void 0===a?L(p,null,null):a])},R=function(e){var n=f(i,t,"footer");if(!n)return null;var o="".concat(e,"-footer");return L("div",{class:o,style:t.footerStyle},[n])};return function(){var a;t.width,t.height;var l=t.visible,c=t.placement,d=t.mask,v=t.wrapClassName,f=t.class,p=Se(t,["width","height","visible","placement","mask","wrapClassName","class"]),m=d?B.value:{},g=d?"":"no-mask",C=e(e(e(e({},r),h(p,["size","closeIcon","closable","destroyOnClose","drawerStyle","headerStyle","bodyStyle","title","push","wrapStyle","onAfterVisibleChange","onClose","onUpdate:visible"])),m),{onClose:b,afterVisibleChange:w,handler:!1,prefixCls:y.value,open:l,showMask:d,placement:c,class:n((a={},o(a,f,f),o(a,v,!!v),o(a,g,!!g),a)),style:V.value,ref:u});return L(Ee,C,{handler:t.handle?function(){return t.handle}:i.handle,default:function(){return function(n){var o;if(s.value&&!t.visible)return null;s.value=!1;var a=t.bodyStyle,l=t.drawerStyle,r={};return T.value&&(r.opacity=0,r.transition="opacity .3s"),L("div",{class:"".concat(n,"-wrapper-body"),style:e(e({},r),l),onTransitionend:N},[A(n),L("div",{key:"body",class:"".concat(n,"-body"),style:a},[null===(o=i.default)||void 0===o?void 0:o.call(i)]),R(n)])}(y.value)}})}}}));const Ne=(e,t,n,o=!0)=>{const a="ontouchstart"in document.documentElement,l=e.getContext("2d");function i(e,t,n,o){l&&(l.beginPath(),l.moveTo(e,t),l.lineTo(n,o),l.stroke())}l&&(l.fillStyle=t,l.strokeStyle=t,l.lineWidth=n,l.lineCap="round");let r,c=!1;function s(e){c=!0;const t=e.touches[0].pageX,n=e.touches[0].pageY;r=[t,n]}function u(e){c=!0;const t=e.touches[0].pageX,n=e.touches[0].pageY;i(r[0],r[1],t,n),r=[t,n]}function d(){c=!1}function v(e){c=!0,r=[e.offsetX,e.offsetY]}function f(e){c&&(i(r[0],r[1],e.offsetX,e.offsetY),r=[e.offsetX,e.offsetY])}document.getElementById("clear").addEventListener("click",(()=>{a?(e.removeEventListener("touchstart",s,!1),e.removeEventListener("touchmove",u,!1),e.removeEventListener("touchend",d,!1)):(e.removeEventListener("mousedown",v),e.removeEventListener("mousemove",f),e.removeEventListener("mouseup",d))})),a&&o?(e.addEventListener("touchstart",s,!1),e.addEventListener("touchmove",u,!1),e.addEventListener("touchend",d,!1)):!a&&o&&(e.addEventListener("mousedown",v),e.addEventListener("mousemove",f),e.addEventListener("mouseup",d))},je=(e,t,n)=>new Promise(((o,a)=>{const l=e.toDataURL(n||"image",t||1),i=new Image;i.src=l,i.onload=()=>{o(i)},i.onerror=e=>{a(e)}}));const Me=e=>(D("data-v-214c6d73"),e=e(),z(),e),Pe={class:"wrap"},Be={id:"canvasWrap"},Ve={class:"selector"},Ae=F("画板设置"),Ie=F("清空画布内容"),Re=F("橡皮擦"),We=F("继续绘画"),Xe={class:"setting"},_e={class:"section"},Ye=Me((()=>I("svg",{class:"icon","aria-hidden":"true"},[I("use",{"xlink:href":"#icon-beijingyanse"})],-1))),He={class:"section"},Fe={class:"section"},De=Me((()=>I("svg",{class:"icon","aria-hidden":"true"},[I("use",{"xlink:href":"#icon-beijingyanse"})],-1))),ze={class:"section changeHeight"},Ue={class:"section"};var $e=B(b({name:"Canvas",setup(e){const t=C(),n=C("#000000"),o=C(4),a=C("#ffffff"),l=C(parseInt(document.body.getBoundingClientRect().height.toString(),10)),i=()=>{Ne(t.value,n.value,o.value)};k((()=>{t.value.width=document.body.getBoundingClientRect().width,t.value.height=document.body.getBoundingClientRect().height,Ne(t.value,n.value,o.value)}));const r=C(!1),c=()=>{r.value=!0},s=async()=>{const e=await(async()=>{let e;try{e=await je(t.value,1,"image")}catch(n){}return e})();t.value.width=document.body.getBoundingClientRect().width,t.value.height=l.value;t.value.getContext("2d").drawImage(e,0,0),i(),r.value=!1},u=()=>{const e=t.value.getContext("2d");e&&(e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.value.width,t.value.height),e.restore())},d=C();function v(e){const t=e.touches[0].pageX,n=e.touches[0].pageY;d.value.style.top=`${n}px`,d.value.style.left=`${t}px`}function f(e){d.value.style.display="block";const n=e.touches[0].pageX,o=e.touches[0].pageY;d.value.style.top=`${o}px`,d.value.style.left=`${n}px`;t.value.getContext("2d").clearRect(n,o,m.value,m.value)}function p(){d.value.style.display="none",t.value.removeEventListener("touchstart",v),t.value.removeEventListener("touchmove",f),t.value.removeEventListener("touchend",p)}const h=C(!1),m=C(20);function y(e){h.value=!0;const t=e.offsetX,n=e.offsetY;d.value.style.top=`${n}px`,d.value.style.left=`${t}px`}function b(e){if(h.value){const n=e.offsetX,o=e.offsetY;d.value.style.display="block",d.value.style.top=`${o}px`,d.value.style.left=`${n}px`;t.value.getContext("2d").clearRect(n,o,m.value,m.value)}}function w(){h.value=!1,d.value.style.display="none",t.value.removeEventListener("mousedown",y),t.value.removeEventListener("mousemove",b),document.documentElement.removeEventListener("mouseup",w)}const x=()=>{Ne(t.value,n.value,o.value)},E=()=>{Ne(t.value,"transparent",1,!1);"ontouchstart"in document.documentElement?(t.value.addEventListener("touchstart",v),t.value.addEventListener("touchmove",f),t.value.addEventListener("touchend",p)):(t.value.addEventListener("mousedown",y),t.value.addEventListener("mousemove",b),document.documentElement.addEventListener("mouseup",w))};return(e,v)=>{const f=g,p=Te;return V(),A("div",Pe,[I("div",Be,[I("canvas",{ref_key:"canvasEl",ref:t,style:R({background:a.value}),class:"canvasEl"},null,4),I("div",Ve,[L(f,{type:"primary",onClick:c},{default:W((()=>[Ae])),_:1}),L(f,{type:"primary",onClick:u},{default:W((()=>[Ie])),_:1}),L(f,{type:"primary",id:"clear",onClick:X(E,["prevent"])},{default:W((()=>[Re])),_:1},8,["onClick"]),L(f,{type:"primary",onClick:x},{default:W((()=>[We])),_:1})])]),L(p,{visible:r.value,"onUpdate:visible":v[5]||(v[5]=e=>r.value=e),class:"custom-class",width:"30%",closable:!1,title:"画板设置",placement:"right"},{default:W((()=>[I("div",Xe,[I("div",_e,[I("p",null,"线条颜色:"+_(n.value),1),I("label",null,[Ye,Y(I("input",{type:"color","onUpdate:modelValue":v[0]||(v[0]=e=>n.value=e),onChange:i},null,544),[[H,n.value]])])]),I("div",He,[I("p",null,"线条宽度:"+_(o.value),1),I("label",null,[Y(I("input",{type:"text","onUpdate:modelValue":v[1]||(v[1]=e=>o.value=e),onChange:i,style:{"max-width":"50px"}},null,544),[[H,o.value,void 0,{number:!0}]])])]),I("div",Fe,[I("p",null,"画布颜色:"+_(a.value),1),I("label",null,[De,Y(I("input",{type:"color","onUpdate:modelValue":v[2]||(v[2]=e=>a.value=e),onChange:i},null,544),[[H,a.value]])])]),I("div",ze,[I("p",null,"画布高度:"+_(l.value),1),I("label",null,[Y(I("input",{type:"text","onUpdate:modelValue":v[3]||(v[3]=e=>l.value=e),style:{"max-width":"50px"},onChange:s},null,544),[[H,l.value,void 0,{number:!0}]])])]),I("div",Ue,[I("p",null,"橡皮擦宽度:"+_(m.value),1),I("label",null,[Y(I("input",{type:"text","onUpdate:modelValue":v[4]||(v[4]=e=>m.value=e),style:{"max-width":"50px"}},null,512),[[H,m.value,void 0,{number:!0}]])])])])])),_:1},8,["visible"]),I("div",{ref_key:"clearTag",ref:d,id:"clearTag"},null,512)])}}}),[["__scopeId","data-v-214c6d73"]]);export{$e as default};
