import{x as e,P as t,b as n,Q as o,n as i}from"./default-33ec26aa.js";import{P as r}from"./Portal-63cf8dec.js";import{_ as a,a as c}from"./classCallCheck-5d344be6.js";import{w as l}from"./raf-291669f5.js";import{d as u,r as d,I as s,f,b as v,n as m,o as p,c as h,H as g}from"./index-cbb612d7.js";var y;function b(e){if("undefined"==typeof document)return 0;if(e||void 0===y){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),o=n.style;o.position="absolute",o.top="0",o.left="0",o.pointerEvents="none",o.visibility="hidden",o.width="200px",o.height="150px",o.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var i=t.offsetWidth;n.style.overflow="scroll";var r=t.offsetWidth;i===r&&(r=n.clientWidth),document.body.removeChild(n),y=i-r}return y}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.element,o=void 0===n?document.body:n,i={},r=Object.keys(e);return r.forEach((function(e){i[e]=o.style[e]})),r.forEach((function(t){o.style[t]=e[t]})),i}var C={},k=function(e){if(document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth||e){var t="ant-scrolling-effect",n=new RegExp("".concat(t),"g"),o=document.body.className;if(e){if(!n.test(o))return;return w(C),C={},void(document.body.className=o.replace(n,"").trim())}var i=b();if(i&&(C=w({position:"relative",width:"calc(100% - ".concat(i,"px)")}),!n.test(o))){var r="".concat(o," ").concat(t);document.body.className=r.trim()}}},N=[],E=new RegExp("".concat("ant-scrolling-effect"),"g"),x=0,j=new Map,T=a((function t(n){var o=this;c(this,t),this.getContainer=function(){var e;return null===(e=o.options)||void 0===e?void 0:e.container},this.reLock=function(e){var t=N.find((function(e){return e.target===o.lockTarget}));t&&o.unLock(),o.options=e,t&&(t.options=e,o.lock())},this.lock=function(){var t;if(!N.some((function(e){return e.target===o.lockTarget})))if(N.some((function(e){var t,n=e.options;return(null==n?void 0:n.container)===(null===(t=o.options)||void 0===t?void 0:t.container)})))N=[].concat(e(N),[{target:o.lockTarget,options:o.options}]);else{var n=0,i=(null===(t=o.options)||void 0===t?void 0:t.container)||document.body;(i===document.body&&window.innerWidth-document.documentElement.clientWidth>0||i.scrollHeight>i.clientHeight)&&(n=b());var r=i.className;if(0===N.filter((function(e){var t,n=e.options;return(null==n?void 0:n.container)===(null===(t=o.options)||void 0===t?void 0:t.container)})).length&&j.set(i,w({width:0!==n?"calc(100% - ".concat(n,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:i})),!E.test(r)){var a="".concat(r," ").concat("ant-scrolling-effect");i.className=a.trim()}N=[].concat(e(N),[{target:o.lockTarget,options:o.options}])}},this.unLock=function(){var e,t=N.find((function(e){return e.target===o.lockTarget}));if(N=N.filter((function(e){return e.target!==o.lockTarget})),t&&!N.some((function(e){var n,o=e.options;return(null==o?void 0:o.container)===(null===(n=t.options)||void 0===n?void 0:n.container)}))){var n=(null===(e=o.options)||void 0===e?void 0:e.container)||document.body,i=n.className;E.test(i)&&(w(j.get(n),{element:n}),j.delete(n),n.className=n.className.replace(E,"").trim())}},this.lockTarget=x++,this.options=n})),W=0,H=o(),L={},P=function(e){if(!H)return null;if(e){if("string"==typeof e)return document.querySelectorAll(e)[0];if("function"==typeof e)return e();if("object"===i(e)&&e instanceof window.HTMLElement)return e}return document.body},S=u({name:"PortalWrapper",inheritAttrs:!1,props:{wrapperClassName:String,forceRender:{type:Boolean,default:void 0},getContainer:t.any,visible:{type:Boolean,default:void 0}},setup:function(e,t){var o=t.slots,i=d(),a=d(),c=d(),u=new T({container:P(e.getContainer)}),y=function(){var e,t;null===(t=null===(e=i.value)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(i.value)},b=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t||i.value&&!i.value.parentNode){var n=P(e.getContainer);return!!n&&(n.appendChild(i.value),!0)}return!0},C=function(){return H?(i.value||(i.value=document.createElement("div"),b(!0)),N(),i.value):null},N=function(){var t=e.wrapperClassName;i.value&&t&&t!==i.value.className&&(i.value.className=t)};s((function(){N(),b()}));var E=function(){1!==W||Object.keys(L).length?W||(w(L),L={},k(!0)):(k(),L=w({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}))},x=g();return f((function(){var t=!1;v([function(){return e.visible},function(){return e.getContainer}],(function(o,i){var r=n(o,2),a=r[0],c=r[1],l=n(i,2),d=l[0],s=l[1];(H&&P(e.getContainer)===document.body&&(a&&!d?W+=1:t&&(W-=1)),t)&&(("function"==typeof c&&"function"==typeof s?c.toString()!==s.toString():c!==s)&&y(),a&&a!==d&&H&&P(c)!==u.getContainer()&&u.reLock({container:P(c)}));t=!0}),{immediate:!0,flush:"post"}),m((function(){b()||(c.value=l((function(){x.update()})))}))})),p((function(){var t=e.visible,n=e.getContainer;H&&P(n)===document.body&&(W=t&&W?W-1:W),y(),l.cancel(c.value)})),function(){var t=e.forceRender,n=e.visible,i=null,c={getOpenCount:function(){return W},getContainer:C,switchScrollingEffect:E,scrollLocker:u};return(t||n||a.value)&&(i=h(r,{getContainer:C,ref:a},{default:function(){var e;return null===(e=o.default)||void 0===e?void 0:e.call(o,c)}})),i}}});export{S as P,b as g};
