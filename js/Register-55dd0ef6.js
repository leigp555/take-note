import"./default-5a702575.js";import{F as e,_ as a}from"./index-0eb0a561.js";import"./index-ae34abe1.js";/* empty css              */import{I as s,_ as r}from"./index-5aa8a713.js";import{B as t}from"./index-bb392ada.js";import{_ as i,d as o,u as l,y as m,i as u,j as n,k as d,c,l as p,a0 as f,s as g,a2 as b}from"./index-c4afe18c.js";import{T as _}from"./axios-dfe30fd5.js";import{u as j}from"./user-f3b594a0.js";import"./isEqual-f55676e6.js";import"./isObjectLike-9a344489.js";import"./_flatRest-9253941e.js";import"./toNumber-ac0708a4.js";import"./toString-5fa2ce81.js";import"./toInteger-9b51be80.js";import"./collapseMotion-22106444.js";import"./FormItemContext-95aae190.js";import"./raf-747b5972.js";import"./useSize-c5727f7b.js";import"./styleChecker-19ba17ee.js";import"./vnode-040f83c5.js";import"./omit-7b41c1e3.js";const y={class:"register-section-wrap"},v={class:"section-from"},h={class:"identifying-code"},k=g("获取验证码"),C={class:"button-action"},w=g(" 注册 "),z=g(" 返回登录 ");var x=i(o({__name:"Register",setup(i){const o=l(),x=j(),A=m({username:"lgp",email:"122974945@qq.com",securityCode:"123456",password:"123456abc",checkPass:"123456abc"}),Z=m({timing:!1,time:60}),q=[{required:!0,message:"请填写用户名"},{pattern:/^[0-9A-Za-z_@/.]{3,20}$/,message:"请输入3-20位(数字,字母或下划线@.)",trigger:"blur"}],I=[{required:!0,message:"请填写邮箱"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请填写正确的邮箱",trigger:"blur"}],$=[{required:!0,message:"请填写密码"},{pattern:/^[a-zA-Z0-9_]{6,16}$/,message:"请输入6到16位(字母，数字，下划线)",trigger:"blur"}],U=[{required:!0,message:"验证密码"},{pattern:/^[a-zA-Z0-9_]{6,16}$/,message:"两次输入不一致",trigger:"blur"}],P=()=>{const e=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(A.email&&e.test(A.email)){_("success","验证码已发送",1500),Z.timing=!0;const e=setInterval((()=>{Z.time>0?Z.time-=1:(Z.timing=!1,Z.time=60,window.clearInterval(e))}),1e3);x.getSecurityCode({email:A.email}).catch((()=>{_("error","发送失败请重试")}))}else A.email&&!e.test(A.email)?_("error","邮箱格式有误"):_("error","请先填写邮箱")},F=()=>{x.register({username:A.username,email:A.email,password:A.password,securityCode:A.securityCode}).then((()=>{_("success","注册成功!2秒后跳转至登录页",2e3),setTimeout((()=>{o.push("/login")}),2e3)})).catch((e=>{_("error",e.errors.errMsg,2e3)}))},S=()=>{o.push("/login")};return(i,o)=>{const l=s,m=a,_=t,j=r,x=e;return u(),n("div",y,[d("section",v,[c(x,{model:A,name:"normal_register",class:"register-form",onFinish:F},{default:p((()=>[c(m,{name:"username",rules:q},{default:p((()=>[c(l,{value:A.username,"onUpdate:value":o[0]||(o[0]=e=>A.username=e),placeholder:"用户名"},null,8,["value"])])),_:1}),c(m,{name:"email",rules:I},{default:p((()=>[c(l,{value:A.email,"onUpdate:value":o[1]||(o[1]=e=>A.email=e),placeholder:"邮箱"},null,8,["value"])])),_:1}),c(m,{name:"securityCode"},{default:p((()=>[d("div",h,[c(l,{value:A.securityCode,"onUpdate:value":o[2]||(o[2]=e=>A.securityCode=e),placeholder:"验证码"},null,8,["value"]),Z.timing?(u(),f(_,{key:1,type:"primary",disabled:"",class:"identifying-code-button",onClick:P},{default:p((()=>[g(b(`${Z.time} 秒后可获取`),1)])),_:1})):(u(),f(_,{key:0,type:"primary",class:"identifying-code-button",onClick:P},{default:p((()=>[k])),_:1}))])])),_:1}),c(m,{name:"password",rules:$},{default:p((()=>[c(j,{value:A.password,"onUpdate:value":o[3]||(o[3]=e=>A.password=e),placeholder:"密码"},null,8,["value"])])),_:1}),c(m,{name:"checkPass",rules:U},{default:p((()=>[c(j,{value:A.checkPass,"onUpdate:value":o[4]||(o[4]=e=>A.checkPass=e),placeholder:"确认密码"},null,8,["value"])])),_:1}),c(m,null,{default:p((()=>[d("div",C,[c(_,{type:"primary","html-type":"submit",class:"register-form-button"},{default:p((()=>[w])),_:1}),c(_,{type:"primary",class:"register-form-button",style:{"background-color":"white"},onClick:S},{default:p((()=>[z])),_:1})])])),_:1})])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-4da0257d"]]);export{x as default};
