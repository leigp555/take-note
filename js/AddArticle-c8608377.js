import"./default-add53953.js";/* empty css              */import{I as e}from"./index-8de529ea.js";import{_ as t,d as a,V as s,r as l,w as r,o as i,e as o,L as c,W as n,f as u,a as d,h as p,j as m,c as v,g as f,X as y,u as _}from"./index-461f95cc.js";import{a as b}from"./article-f5e48944.js";import{p as h}from"./marked.esm-3fd1c616.js";import"./index-97df7f35.js";import{B as j}from"./button-a54e8c4a.js";import"./index-a4e60a5d.js";import"./FormItemContext-4ebe2f02.js";import"./omit-4992fbe8.js";import"./vnode-89a287a7.js";import"./axios-10bb5b34.js";import"./classCallCheck-5d344be6.js";import"./raf-b2de4fce.js";import"./SearchOutlined-f2638702.js";import"./Password-954a6816.js";import"./isObjectLike-70fdce6f.js";import"./_overArg-34791ad0.js";import"./EyeOutlined-6d4a1d87.js";import"./index-761661f6.js";const g={class:"write-article-wrap"};var x=t(a({__name:"InputTextarea",setup(e){const t=b(),{body:a}=s(t),d=l("");r((()=>{d.value=a.value}));const p=e=>{const a=e.target;t.$patch((e=>{e.scrollHeight=a.scrollTop}))},m=()=>{t.$patch((e=>{e.body=d.value})),t.saveLocal()};return(e,t)=>(i(),o("div",g,[c(u("textarea",{id:"article-text",class:"article-write",onScroll:p,onInput:m,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e)},null,544),[[n,d.value]])]))}}),[["__scopeId","data-v-d85e830c"]]);const k={class:"read-article"},L=["innerHTML"];var C=t(a({__name:"OutputTextarea",setup(e){const t=b(),{body:a,scrollHeight:c}=s(t),n=d((()=>h(a.value||""))),m=l();return r((()=>{m.value&&(m.value.scrollTop=c.value)})),(e,t)=>(i(),o("div",k,[u("div",{class:"article-read",ref_key:"outputArticle",ref:m,contenteditable:"false",innerHTML:p(n)},null,8,L)]))}}),[["__scopeId","data-v-2a469f60"]]);const w={class:"action"},$=y("代码块"),A=y("图片"),I=y("加粗"),O=y("斜体"),T=y("删除线"),H=y("无序列表"),S=y("有序列表"),E=y("超链接");var P=t(a({__name:"ArticleAction",setup(e){const t=l();m((()=>{t.value=document.getElementById("article-text")}));const a=b(),{body:r}=s(a);function c(e,t,s){const l=e.selectionStart,i=e.selectionEnd;if(e.selectionStart){const o=`${r.value.substring(0,l)+t+r.value.substring(l,i)}${s}${r.value.substring(i,r.value.length)}`;e.value=o,a.$patch((e=>{e.body=o})),a.saveLocal()}else{const l=t+e.value+s;e.value=l,a.$patch((e=>{e.body=l})),a.saveLocal()}}const n=e=>{"code"===e?c(t.value,"```","```"):"img"===e?c(t.value,"![在这里插入图片描述]","(图片链接)"):"weight"===e?c(t.value,"**","**"):"scale"===e?c(t.value,"*","*"):"delete"===e?c(t.value,"~~","~~"):"unOrderList"===e?c(t.value," - List item",""):"orderedList"===e?c(t.value," 1. List item",""):"link"===e&&c(t.value,"[链接描述]","(链接地址)")};return(e,t)=>{const a=j;return i(),o("div",w,[v(a,{type:"primary",onClick:t[0]||(t[0]=e=>n("code"))},{default:f((()=>[$])),_:1}),v(a,{type:"primary",onClick:t[1]||(t[1]=e=>n("img"))},{default:f((()=>[A])),_:1}),v(a,{type:"primary",onClick:t[2]||(t[2]=e=>n("weight"))},{default:f((()=>[I])),_:1}),v(a,{type:"primary",onClick:t[3]||(t[3]=e=>n("scale"))},{default:f((()=>[O])),_:1}),v(a,{type:"primary",onClick:t[4]||(t[4]=e=>n("delete"))},{default:f((()=>[T])),_:1}),v(a,{type:"primary",onClick:t[5]||(t[5]=e=>n("unOrderList"))},{default:f((()=>[H])),_:1}),v(a,{type:"primary",onClick:t[6]||(t[6]=e=>n("orderedList"))},{default:f((()=>[S])),_:1}),v(a,{type:"primary",onClick:t[7]||(t[7]=e=>n("link"))},{default:f((()=>[E])),_:1})])}}}),[["__scopeId","data-v-d29eb6d4"]]);const B={class:"wrap"},M={class:"title-wrap"},U=y(" 文章标题 "),V=y("保存为草稿"),F=y("发布文章"),W={class:"article-wrap"},X={class:"input-textarea"},q={class:"output-textarea"};var z=t(a({__name:"AddArticle",setup(t){const a=b(),c=_();a.getLastArticle();const{title:n}=s(a),d=l("");r((()=>{d.value=n.value}));const p=()=>{a.$patch((e=>{e.title=d.value})),a.saveLocal()},m=()=>{a.createArticle({isPublic:!1,state:"draft"}).then((e=>{c.push(`/success/${e.identity_number}`)}),(()=>{c.push("/fail")}))},y=()=>{a.createArticle({isPublic:!1,state:"normal"}).then((e=>{c.push(`/success/${e.identity_number}`)}),(()=>{c.push("/fail")}))};return(t,a)=>{const s=e,l=j;return i(),o("div",B,[u("nav",M,[U,v(s,{class:"title",value:d.value,"onUpdate:value":a[0]||(a[0]=e=>d.value=e),"show-count":"",maxlength:100,onChange:p,placeholder:"请输入标题"},null,8,["value"]),v(l,{type:"primary",onClick:m},{default:f((()=>[V])),_:1}),v(l,{type:"primary",onClick:y},{default:f((()=>[F])),_:1})]),u("section",null,[v(P)]),u("main",W,[u("section",X,[v(x)]),u("section",q,[v(C)])])])}}}),[["__scopeId","data-v-f2ce2f1a"]]);export{z as default};
