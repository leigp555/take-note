import"./default-add53953.js";import{F as e,_ as a}from"./index-a55f8169.js";import"./index-86ef4cb8.js";/* empty css              */import{I as s}from"./index-8de529ea.js";/* empty css              */import{_ as t,d as r,u as i,q as o,o as l,e as m,f as u,c as d,g as n,p as c,i as p,a0 as f,X as g,a1 as b}from"./index-461f95cc.js";import{T as _}from"./axios-10bb5b34.js";import{u as j}from"./user-139840af.js";import{B as y}from"./button-a54e8c4a.js";import{_ as v}from"./Password-954a6816.js";import"./isEqual-125053f7.js";import"./isObjectLike-70fdce6f.js";import"./_overArg-34791ad0.js";import"./_flatRest-23e80e00.js";import"./toNumber-31781abb.js";import"./toString-5605af44.js";import"./toArray-484f5469.js";import"./toInteger-1efd1607.js";import"./collapseMotion-9ca31bfa.js";import"./FormItemContext-4ebe2f02.js";import"./raf-b2de4fce.js";import"./styleChecker-dd26d045.js";import"./omit-4992fbe8.js";import"./vnode-89a287a7.js";import"./EyeOutlined-6d4a1d87.js";const h={class:"register-section-wrap"},k=(e=>(c("data-v-a96b96d6"),e=e(),p(),e))((()=>u("section",{class:"section-title"},[u("h3",{style:{"text-align":"center"}},"用户注册")],-1))),C={class:"section-from"},w={class:"identifying-code"},A=g("获取验证码"),x={class:"button-action"},z=g(" 注册 "),Z=g(" 返回登录 ");var q=t(r({__name:"Register",setup(t){const r=i(),c=j(),p=o({username:"lgp",email:"122974945@qq.com",securityCode:"123456",password:"123456abc",checkPass:"123456abc"}),q=o({timing:!1,time:60}),I=[{required:!0,message:"请填写用户名"},{pattern:/^[0-9A-Za-z_@/.]{3,20}$/,message:"请输入3-20位(数字,字母或下划线@.)",trigger:"blur"}],$=[{required:!0,message:"请填写邮箱"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请填写正确的邮箱",trigger:"blur"}],P=[{required:!0,message:"请填写密码"},{pattern:/^[a-zA-Z0-9_]{6,16}$/,message:"请输入6到16位(字母，数字，下划线)",trigger:"blur"}],U=[{required:!0,message:"验证密码"},{pattern:/^[a-zA-Z0-9_]{6,16}$/,message:"两次输入不一致",trigger:"blur"}],F=()=>{const e=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(p.email&&e.test(p.email)){_("success","验证码已发送",1500),q.timing=!0;const e=setInterval((()=>{q.time>0?q.time-=1:(q.timing=!1,q.time=60,window.clearInterval(e))}),1e3);c.getSecurityCode({email:p.email,type:"register"}).catch((()=>{_("error","发送失败请重试")}))}else p.email&&!e.test(p.email)?_("error","邮箱格式有误"):_("error","请先填写邮箱")},E=()=>{c.register({username:p.username,email:p.email,password:p.password,securityCode:p.securityCode}).then((()=>{_("success","注册成功!2秒后跳转至登录页",2e3),setTimeout((()=>{r.push("/login")}),2e3)})).catch((e=>{_("error",e.errors.errMsg,2e3)}))},M=()=>{r.push("/login")};return(t,r)=>{const i=s,o=a,c=y,_=v,j=e;return l(),m("div",h,[k,u("section",C,[d(j,{model:p,name:"normal_register",class:"register-form",onFinish:E},{default:n((()=>[d(o,{name:"username",rules:I},{default:n((()=>[d(i,{value:p.username,"onUpdate:value":r[0]||(r[0]=e=>p.username=e),placeholder:"用户名"},null,8,["value"])])),_:1}),d(o,{name:"email",rules:$},{default:n((()=>[d(i,{value:p.email,"onUpdate:value":r[1]||(r[1]=e=>p.email=e),placeholder:"邮箱"},null,8,["value"])])),_:1}),d(o,{name:"securityCode"},{default:n((()=>[u("div",w,[d(i,{value:p.securityCode,"onUpdate:value":r[2]||(r[2]=e=>p.securityCode=e),placeholder:"验证码"},null,8,["value"]),q.timing?(l(),f(c,{key:1,type:"primary",disabled:"",class:"identifying-code-button",onClick:F},{default:n((()=>[g(b(`${q.time} 秒后可获取`),1)])),_:1})):(l(),f(c,{key:0,type:"primary",class:"identifying-code-button",onClick:F},{default:n((()=>[A])),_:1}))])])),_:1}),d(o,{name:"password",rules:P},{default:n((()=>[d(_,{value:p.password,"onUpdate:value":r[3]||(r[3]=e=>p.password=e),placeholder:"密码"},null,8,["value"])])),_:1}),d(o,{name:"checkPass",rules:U},{default:n((()=>[d(_,{value:p.checkPass,"onUpdate:value":r[4]||(r[4]=e=>p.checkPass=e),placeholder:"确认密码"},null,8,["value"])])),_:1}),d(o,null,{default:n((()=>[u("div",x,[d(c,{type:"primary","html-type":"submit",class:"register-form-button"},{default:n((()=>[z])),_:1}),d(c,{type:"primary",class:"register-form-button",style:{"background-color":"white"},onClick:M},{default:n((()=>[Z])),_:1})])])),_:1})])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-a96b96d6"]]);export{q as default};
