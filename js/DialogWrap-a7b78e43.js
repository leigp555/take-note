import{P as e,_ as o,f as n,x as t,T as a,e as l}from"./default-add53953.js";import{c as i}from"./contains-960a673b.js";import{K as r}from"./KeyCode-a2a1cb88.js";import{o as s}from"./omit-4992fbe8.js";import{p as u}from"./pickAttrs-6b9e64c0.js";import{i as c}from"./raf-b2de4fce.js";import{d,r as f,a as v,c as m,L as p,M as y,B as b,s as g,D as C,w as k}from"./index-461f95cc.js";import{P as h}from"./PortalWrapper-31dadcc5.js";import{u as x}from"./Portal-55d80112.js";function w(){return{keyboard:{type:Boolean,default:void 0},mask:{type:Boolean,default:void 0},afterClose:Function,closable:{type:Boolean,default:void 0},maskClosable:{type:Boolean,default:void 0},visible:{type:Boolean,default:void 0},destroyOnClose:{type:Boolean,default:void 0},mousePosition:e.shape({x:Number,y:Number}).loose,title:e.any,footer:e.any,transitionName:String,maskTransitionName:String,animation:e.any,maskAnimation:e.any,wrapStyle:{type:Object,default:void 0},bodyStyle:{type:Object,default:void 0},maskStyle:{type:Object,default:void 0},prefixCls:String,wrapClassName:String,rootClassName:String,width:[String,Number],height:[String,Number],zIndex:Number,bodyProps:e.any,maskProps:e.any,wrapProps:e.any,getContainer:e.any,dialogStyle:{type:Object,default:void 0},dialogClass:String,closeIcon:e.any,forceRender:{type:Boolean,default:void 0},getOpenCount:Function,focusTriggerAfterClose:{type:Boolean,default:void 0},onClose:Function,modalRender:Function}}function S(e,o,n){var t=o;return!t&&n&&(t="".concat(e,"-").concat(n)),t}var N=-1;function P(e,o){var n=e["page".concat(o?"Y":"X","Offset")],t="scroll".concat(o?"Top":"Left");if("number"!=typeof n){var a=e.document;"number"!=typeof(n=a.documentElement[t])&&(n=a.body[t])}return n}var O={width:0,height:0,overflow:"hidden",outline:"none"},j=d({name:"Content",inheritAttrs:!1,props:o(o({},w()),{motionName:String,ariaId:String,onVisibleChanged:Function,onMousedown:Function,onMouseup:Function}),setup:function(e,o){var l=o.expose,i=o.slots,r=o.attrs,s=f(),u=f(),c=f();l({focus:function(){var e;null===(e=s.value)||void 0===e||e.focus()},changeActive:function(e){var o=document.activeElement;e&&o===u.value?s.value.focus():e||o!==s.value||u.value.focus()}});var d=f(),g=v((function(){var o=e.width,n=e.height,t={};return void 0!==o&&(t.width="number"==typeof o?"".concat(o,"px"):o),void 0!==n&&(t.height="number"==typeof n?"".concat(n,"px"):n),d.value&&(t.transformOrigin=d.value),t})),C=function(){b((function(){if(c.value){var o=(n=c.value,t=n.getBoundingClientRect(),a={left:t.left,top:t.top},l=n.ownerDocument,i=l.defaultView||l.parentWindow,a.left+=P(i),a.top+=P(i,!0),a);d.value=e.mousePosition?"".concat(e.mousePosition.x-o.left,"px ").concat(e.mousePosition.y-o.top,"px"):""}var n,t,a,l,i}))},k=function(o){e.onVisibleChanged(o)};return function(){var o,l,d,f,v,b,h,x=e.prefixCls,w=e.footer,S=void 0===w?null===(o=i.footer)||void 0===o?void 0:o.call(i):w,N=e.title,P=void 0===N?null===(l=i.title)||void 0===l?void 0:l.call(i):N,j=e.ariaId,A=e.closable,T=e.closeIcon,B=void 0===T?null===(d=i.closeIcon)||void 0===d?void 0:d.call(i):T,I=e.onClose,L=e.bodyStyle,M=e.bodyProps,E=e.onMousedown,F=e.onMouseup,R=e.visible,D=e.modalRender,V=void 0===D?i.modalRender:D,z=e.destroyOnClose,K=e.motionName;S&&(v=m("div",{class:"".concat(x,"-footer")},[S])),P&&(b=m("div",{class:"".concat(x,"-header")},[m("div",{class:"".concat(x,"-title"),id:j},[P])])),A&&(h=m("button",{type:"button",onClick:I,"aria-label":"Close",class:"".concat(x,"-close")},[B||m("span",{class:"".concat(x,"-close-x")},null)]));var W=m("div",{class:"".concat(x,"-content")},[h,b,m("div",n({class:"".concat(x,"-body"),style:L},M),[null===(f=i.default)||void 0===f?void 0:f.call(i)]),v]),_=t(K);return m(a,n(n({},_),{},{onBeforeEnter:C,onAfterEnter:function(){return k(!0)},onAfterLeave:function(){return k(!1)}}),{default:function(){return[R||!z?p(m("div",n(n({},r),{},{ref:c,key:"dialog-element",role:"document",style:[g.value,r.style],class:[x,r.class],onMousedown:E,onMouseup:F}),[m("div",{tabindex:0,ref:s,style:O,"aria-hidden":"true"},null),V?V({originVNode:W}):W,m("div",{tabindex:0,ref:u,style:O,"aria-hidden":"true"},null)]),[[y,R]]):null]}})}}});var A=d({name:"Mask",props:{prefixCls:String,visible:Boolean,motionName:String,maskProps:Object},setup:function(e,o){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(o),function(){var o=e.prefixCls,l=e.visible,i=e.maskProps,r=e.motionName,s=t(r);return m(a,s,{default:function(){return[p(m("div",n({class:"".concat(o,"-mask")},i),null),[[y,l]])]}})}}}),T=d({name:"Dialog",inheritAttrs:!1,props:c(o(o({},w()),{getOpenCount:Function,scrollLocker:Object}),{mask:!0,visible:!1,keyboard:!0,closable:!0,maskClosable:!0,destroyOnClose:!1,prefixCls:"rc-dialog",getOpenCount:function(){return null},focusTriggerAfterClose:!0}),setup:function(e,t){var a=t.attrs,c=t.slots,d=f(),v=f(),p=f(),y=f(e.visible),b=f("vcDialogTitle".concat(N+=1)),h=function(o){var n,t;if(o)i(v.value,document.activeElement)||(d.value=document.activeElement,null===(n=p.value)||void 0===n||n.focus());else{var a=y.value;if(y.value=!1,e.mask&&d.value&&e.focusTriggerAfterClose){try{d.value.focus({preventScroll:!0})}catch(l){}d.value=null}a&&(null===(t=e.afterClose)||void 0===t||t.call(e))}},x=function(o){var n;null===(n=e.onClose)||void 0===n||n.call(e,o)},w=f(!1),P=f(),O=function(){clearTimeout(P.value),w.value=!0},T=function(){P.value=setTimeout((function(){w.value=!1}))},B=function(o){if(!e.maskClosable)return null;w.value?w.value=!1:v.value===o.target&&x(o)},I=function(o){if(e.keyboard&&o.keyCode===r.ESC)return o.stopPropagation(),void x(o);e.visible&&o.keyCode===r.TAB&&p.value.changeActive(!o.shiftKey)};return g((function(){return e.visible}),(function(){e.visible&&(y.value=!0)}),{flush:"post"}),C((function(){var o;clearTimeout(P.value),null===(o=e.scrollLocker)||void 0===o||o.unLock()})),k((function(){var o,n;null===(o=e.scrollLocker)||void 0===o||o.unLock(),y.value&&(null===(n=e.scrollLocker)||void 0===n||n.lock())})),function(){var t=e.prefixCls,i=e.mask,r=e.visible,d=e.maskTransitionName,f=e.maskAnimation,g=e.zIndex,C=e.wrapClassName,k=e.rootClassName,w=e.wrapStyle,N=e.closable,P=e.maskProps,L=e.maskStyle,M=e.transitionName,E=e.animation,F=e.wrapProps,R=e.title,D=void 0===R?c.title:R,V=a.style,z=a.class;return m("div",n({class:["".concat(t,"-root"),k]},u(e,{data:!0})),[m(A,{prefixCls:t,visible:i&&r,motionName:S(t,d,f),style:o({zIndex:g},L),maskProps:P},null),m("div",n({tabIndex:-1,onKeydown:I,class:l("".concat(t,"-wrap"),C),ref:v,onClick:B,role:"dialog","aria-labelledby":D?b.value:null,style:o(o({zIndex:g},w),{display:y.value?null:"none"})},F),[m(j,n(n({},s(e,["scrollLocker"])),{},{style:V,class:z,onMousedown:O,onMouseup:T,ref:p,closable:N,ariaId:b.value,prefixCls:t,visible:r,onClose:x,onVisibleChanged:h,motionName:S(t,M,E)}),c)])])}}}),B=d({name:"DialogWrap",inheritAttrs:!1,props:c(w(),{visible:!1}),setup:function(e,t){var a=t.attrs,l=t.slots,i=f(e.visible);return x({},{inTriggerContext:!1}),g((function(){return e.visible}),(function(){e.visible&&(i.value=!0)}),{flush:"post"}),function(){var t=e.visible,r=e.getContainer,s=e.forceRender,u=e.destroyOnClose,c=void 0!==u&&u,d=e.afterClose,f=o(o(o({},e),a),{ref:"_component",key:"dialog"});return!1===r?m(T,n(n({},f),{},{getOpenCount:function(){return 2}}),l):s||!c||i.value?m(h,{visible:t,forceRender:s,getContainer:r},{default:function(e){return f=o(o(o({},f),e),{afterClose:function(){null==d||d(),i.value=!1}}),m(T,f,l)}}):null}}});export{B as D,w as d};
